---
layout: post
status: publish
published: true
title: WordPress - картинки на поддомене
author:
  display_name: SlowProg
  login: seoadmin
  email: paperplanesu@rambler.ru
  url: http://paperplane.su
author_login: seoadmin
author_email: paperplanesu@rambler.ru
author_url: http://paperplane.su
wordpress_id: 2453
wordpress_url: http://paperplane.su/?p=2453
date: '2012-05-22 17:21:27 +0400'
date_gmt: '2012-05-22 13:21:27 +0400'
categories:
- Оптимизация
tags:
- оптимизация
- ускорение
comments:
- id: 49307
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2012-06-04 15:40:57 +0400'
  date_gmt: '2012-06-04 11:40:57 +0400'
  content: А я все ждал, когда увижу результаты увеличения скорости загрузки сайта
    в фаербаге. Хочется увидеть пару скриншотов до, и после....
- id: 49310
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-06-04 16:05:58 +0400'
  date_gmt: '2012-06-04 12:05:58 +0400'
  content: НУ с этим я запамятовал. "До" уже не получится сделать. Вот если буду оптимизировать
    где-нибудь в другом месте, то предоставлю.
- id: 49659
  author: U
  author_email: u@paperplane.su
  author_url: http://paperplane.su
  date: '2012-06-06 17:45:57 +0400'
  date_gmt: '2012-06-06 13:45:57 +0400'
  content: Статья супер!
- id: 128304
  author: morontt
  author_email: morontt@gmail.com
  author_url: http://morontt.info
  date: '2012-12-07 02:51:02 +0400'
  date_gmt: '2012-12-06 22:51:02 +0400'
  content: Вчера эту запись твою прочитал, вспомнил, что уже читал ранее про этот
    метод ускорения. Так что и у себя реализовал :) Может быть на выходных потестирую,
    как со скоростью ДО и ПОСЛЕ, благо системы контроля версий выполняют в таких случаях
    функции машины времени.
- id: 128377
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-07 13:36:27 +0400'
  date_gmt: '2012-12-07 09:36:27 +0400'
  content: Выигрыш значительный при больших объемах, конечно же. Если одна картинка
    на странице, то особо разницы не будет. В общем, это позволяет ускорить процесс
    загрузки, но в конечном итоге единовременная нагрузка на сервер не падает. И тогда
    я рекомендовал бы для картинок использовать постепенную подгрузку или ленивую,
    как она там зовется. С помощью нее единовременную нагрузку можно растянуть во
    времени. Но это так =) На любителя. И лучше не только картинки подгружать с поддомена,
    но и CSS с JS. Тогда будет совсем круто.
- id: 128398
  author: morontt
  author_email: morontt@gmail.com
  author_url: http://morontt.info
  date: '2012-12-07 16:52:29 +0400'
  date_gmt: '2012-12-07 12:52:29 +0400'
  content: "Проверю с секундомером :) С ленивой загрузкой неохота пока заморачиваться,
    т.к. не совсем нравится результат на сайтах, где это реализовано, когда картинки
    реально тупят, крутишь ленту, а в ней везде одна картинка заполнитель...\r\nСейчас
    думаю над другой задачей, касаемо JS и CSS, а именно автоматом подтягивать все
    скрипты и стили со страницы, собирать их в один файл для скриптов и один для стилей,
    по возможности минифицировать и сжимать. Не на пустом, конечно, месте велосипед
    изобретать, а на основе библиотек вроде http:&#47;&#47;code.google.com&#47;p&#47;minify&#47;\r\nЭто
    будет точно быстрее, чем перенос скриптов и стилей на свои поддомены :)"
- id: 128411
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2012-12-07 18:59:43 +0400'
  date_gmt: '2012-12-07 14:59:43 +0400'
  content: "Ленивую загрузку сделал с месяц назад на своем сайте. Где много картинок
    - реально спасает.\r\n\r\nПо поводу поддомена - а если использовать для статики
    облачные хранилища - Гугл драйв, дропбокс  и т.п.?\r\n\r\nКстати некоторые сайты
    разносят по нескольким серверам картинки - st1. , st2. и т.д., но вот выгодно
    ли это?"
- id: 128422
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-07 21:12:18 +0400'
  date_gmt: '2012-12-07 17:12:18 +0400'
  content: В этих случаях ускорение будет достигаться за счет двух факторов. Первый
    - распараллеливание загрузки страницы. И второе - физическое расстояние сервера
    от конечного пользователя, а точнее количество маршрутизаторов между ними. Первое
    достигается автоматически, все современные браузеры подгружают параллельно контент
    с разных доменов. А второе уже как придется. Про второе я бы рекомендовал почитать
    про технологию <a href="http:&#47;&#47;ru.wikipedia.org&#47;wiki&#47;Content_Delivery_Network"
    rel="nofollow">CDN<&#47;a>.
- id: 128423
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-07 21:23:20 +0400'
  date_gmt: '2012-12-07 17:23:20 +0400'
  content: "Да, сжатие CSS и JS реально дает прирост производительности. Minify юзал
    в рамках плагина W3 Total Cache и он как-то нехорошо отрабатывал, не то ломал
    JS не то что-то еще, в общем мне лень было разбираться =) Но это дело вкуса, можно
    и самому написать, благо ничего сложного.\r\n\r\nТут интерес в другом. В том что
    увлекаться этим не стоит. Во-первых, у IE (особенно, вроде, последнего) есть ограничение
    на размеры CSS-файлов. Если происходит объединение толпы файлов, то можно долго
    провозится в поисках странной ошибки EI, а он просто перестает парсить большие
    файлы и всё. Во-вторых, если сайт динамический, то это значит МНОГО JS, если всё
    разом загрузить, то конечному пользователю будет не удобно (в зависимости от мощности
    его компа). Картина будет примерно такая, что пользователь будет глядеть на белую
    страницу, пока весь JS не интерпретируется и это может происходить долго. Что
    это плохо и говорить не надо. В данном случаи лучше вначале инициализирующий файл
    кидать, а потом уже остальное, тогда можно, как бы постепенно, показать интерфейс,
    что будет выглядеть более красиво. Пользователь хоть будет видеть, что что-то
    происходит."
- id: 128424
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2012-12-07 21:27:14 +0400'
  date_gmt: '2012-12-07 17:27:14 +0400'
  content: "CDN - финансово не под силу простым блогерам. Дорогая штука.\r\n\r\nСамый
    простой вариант, конечно же, как вы и описали - просто на поддомен скинуть все
    картинки, да и вообще всю статику."
- id: 128425
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-07 21:33:28 +0400'
  date_gmt: '2012-12-07 17:33:28 +0400'
  content: Ну это да. Особенно если еще CSS и JS пожать, то выигрыш будет. НО опять
    же для большинства блогов это не нужно. Когда посещаемость до 100 уникумов, то
    можно об этом не думать. Хотя зависит от хостинга, я раньше сидел на ДРУГОМ хостинге
    (пальцем тыкать не буду) и он не выдерживал моей нагрузки. Я оптимизировал как
    могу, снижал разными способами нагрузку (на этой почве статьи и писались), но
    посещаемость росла и в конце концов я перешел к другому хостеру и теперь всё отлично.
- id: 128442
  author: morontt
  author_email: morontt@gmail.com
  author_url: http://morontt.info
  date: '2012-12-08 00:32:46 +0400'
  date_gmt: '2012-12-07 20:32:46 +0400'
  content: С IE известная проблема, когда 4096 селекторов или правил в одном файле,
    но и без этого эксплорер сам по себе проблемный :) А про JS не понял. Какая принципиальная
    разница будет в том, одним ли файлом загружаются скрипты или десятком файлов?
    Время то интерпретации от этого не меняется. Или мы про разные вещи говорим?
- id: 128447
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-08 01:32:27 +0400'
  date_gmt: '2012-12-07 21:32:27 +0400'
  content: "За время отдачи сервером одного большого файла JS можно запустить один
    небольшой инициирующий файл, а потом остальное. Т.к. пока большой файл не докачается
    у пользователя ничего не отобразится, а во втором случае можно что-нибудь отобразить
    сразу, чтобы он не скучал xDDDDD\r\n\r\nНаверно это как-то по-фанатски звучит,
    но это так. В случае, полностью динамического сайта, я думаю, такой способ предпочтительный."
- id: 149983
  author: Сергей
  author_email: antoshkin_80@mail.ru
  author_url: ''
  date: '2013-04-25 19:45:09 +0400'
  date_gmt: '2013-04-25 15:45:09 +0400'
  content: Здравствуйте. В Wordpress 3.5.1 в разделе Параметры > Медиафайлы нет строчек
    для того чтобы прописать путь, я в замешательстве :) ,  как их вернуть?
- id: 150051
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-04-26 02:34:40 +0400'
  date_gmt: '2013-04-25 22:34:40 +0400'
  content: Вернуть их нельзя. Но возможно вам поможет <a href="http:&#47;&#47;paperplane.su&#47;change-uploads-folder&#47;"
    rel="nofollow">это<&#47;a>. Я не ручаюсь, но попробуйте. Если получится, то обязательно
    отпишитесь о процессе. О проблемах тоже пишите, попробуем вместе обмозговать =)
- id: 150061
  author: Сергей
  author_email: antoshkin_80@mail.ru
  author_url: ''
  date: '2013-04-26 04:17:56 +0400'
  date_gmt: '2013-04-26 00:17:56 +0400'
  content: "Вроде нашел решение вот тут <a href=\"http:&#47;&#47;wordpress.org&#47;support&#47;topic&#47;wordpress-35-where-the-option-settings-media-upload_path-gone?replies=20\"
    rel=\"nofollow\">Wordpress.org<&#47;a> , как я понял, вроде даже хотят вернуть
    все на место в новой версии <strong>wordpress<&#47;strong>. Я в английском полный
    ноль, могу ошибаться, так, что во всем прошу винить переводчик Гугла. :)\r\nНа
    локалке опробовал, вроде работает, но на реальном сервере, побаиваюсь. Вот как
    теперь картинки на поддомен перенести. :)"
- id: 150128
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-04-26 11:54:55 +0400'
  date_gmt: '2013-04-26 07:54:55 +0400'
  content: "Хм, в принципе там говорится о выставлении константы UPLOADS. Как раз
    то о чём у меня в новой статье написано.\r\n\r\nА про обратный возврат ничего
    не сказано. Только возмущения людей что они не понимают разрабов и не считают
    это шагом в перёд."
- id: 150193
  author: Сергей
  author_email: antoshkin_80@mail.ru
  author_url: ''
  date: '2013-04-26 16:09:55 +0400'
  date_gmt: '2013-04-26 12:09:55 +0400'
  content: "Ну я предупредил, что не шарю в английском, наверно не так понял.\r\n
    Это пол беды, как мне теперь картинки на поддомен перенести.  Там в одном комменте,
    я нашел как вернуть поля во вкладку Параметры > Медиафайлы, с помощью добавления
    хука в файл fuction.php, поля возвращаються, но к сожалению не работают, при изменении
    пути сохранения картинок в этих полях, картинки все равно грузятся в старую папку,
    фигня какая-то!!!\r\nМожет можно эти пути где-то в другом месте прописать, что-то
    я загорелся перенести картинки на поддомен?  :) Спасибо вам за участие в решении
    моей проблемы, многие остаються равнодушными и просто отписываются."
- id: 150199
  author: Сергей
  author_email: antoshkin_80@mail.ru
  author_url: ''
  date: '2013-04-26 17:03:57 +0400'
  date_gmt: '2013-04-26 13:03:57 +0400'
  content: Почитал вашу новую статью, про константу UPLOADS, и у меня возник вопрос,
    наверно можно с помощью этой константы указать путь на поддомен, и не нужно возвращать
    эти поля в Параметры > Медиафайлы? Как вы думаете?
- id: 150210
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-04-26 18:10:34 +0400'
  date_gmt: '2013-04-26 14:10:34 +0400'
  content: Не, не надо. Я нашёл путь попроще. Установите плагин <a href="http:&#47;&#47;wordpress.org&#47;extend&#47;plugins&#47;wp-original-media-path&#47;"
    target="_blank" rel="nofollow">WP Original Media Path<&#47;a> и тогда к вам вернуться
    заветные поля, да к тому же они ещё и работать будут. Сам проверил =)
- id: 150215
  author: Сергей
  author_email: antoshkin_80@mail.ru
  author_url: ''
  date: '2013-04-26 18:52:33 +0400'
  date_gmt: '2013-04-26 14:52:33 +0400'
  content: СПАСИБО ОГРОМНОЕ! Я уже не знал, что делать. Вы в очередной раз мне помогли,
    сейчас буду переносить картинки на поддомен.
- id: 150310
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-04-27 01:11:08 +0400'
  date_gmt: '2013-04-26 21:11:08 +0400'
  content: Пишите о результатах сюда. Если всё получится, то я скорректирую мануал
    по вашему опыту.
- id: 150320
  author: Сергей
  author_email: antoshkin_80@mail.ru
  author_url: ''
  date: '2013-04-27 01:27:37 +0400'
  date_gmt: '2013-04-26 21:27:37 +0400'
  content: Хорошо, как сделаю все, напишу.
- id: 168530
  author: Простой
  author_email: druzbasaytami@mail.ru
  author_url: http://nikosun.com/
  date: '2013-06-23 15:05:40 +0400'
  date_gmt: '2013-06-23 11:05:40 +0400'
  content: Классный совет. Так получается придётся всегда использовать плагин WP Original
    Media Path? А это + ещё один плагин в копилку. Не очень хочется прибавить его
    )) Хотя он и маленький но всё же))
- id: 168531
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-06-23 15:08:47 +0400'
  date_gmt: '2013-06-23 11:08:47 +0400'
  content: Ну изначально было всё хорошо, просто создатели WordPress сделали фигню.
    Ну если совсем не в моготу, то можно из этого плагина выдрать нужные строчки кода
    и поместить их в functions.php.
- id: 168622
  author: Простой
  author_email: druzbasaytami@mail.ru
  author_url: ''
  date: '2013-06-23 23:03:00 +0400'
  date_gmt: '2013-06-23 19:03:00 +0400'
  content: "Мне под домен не нужен, а нужно просто поменять место хранения рисунков.\r\n1)
    Поэтому создал папку в корне сайта (то есть папку image: Сайт.ком&#47;image),
    пелекопировал туда все картинки. Картинки у меня загружены по месяцу и году.\r\n\r\n2)
    Затем зашёл в php my admin. Выбрал: _wp и выполнил SQL-запрос:\r\nUPDATE wp_posts
    SET post_content = REPLACE(post_content, 'http:&#47;&#47;мойсайт.com&#47;wp-content&#47;uploads&#47;','http:&#47;&#47;сайт.com&#47;image')\r\n\r\n3)
    Затем ещё один запрос:\r\nUPDATE wp_posts SET guid = REPLACE(guid, 'http:&#47;&#47;мойсайт.com&#47;wp-content&#47;uploads&#47;','http:&#47;&#47;сайт.com&#47;image')\r\n\r\nВ
    результате почему-то адреса к картинкам стали не  мойсайт.com&#47;image&#47;год&#47;месяц,
    а мойсайт.com&#47;image&#47;месяц.\r\n\r\nПодскажите пожалуйста, как это исправить
    и в чём моя ошибка?"
- id: 168729
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-06-24 13:06:07 +0400'
  date_gmt: '2013-06-24 09:06:07 +0400'
  content: Единственное что я вижу из этого псевдо-кода это то что у вас теряется
    слеш после подмены адресов. Вы берёте <em>http:&#47;&#47;мойсайт.com&#47;wp-content&#47;uploads&#47;<&#47;em>
    и заменяете на <em>http:&#47;&#47;сайт.com&#47;image<&#47;em>, где вконце нет
    слеша. Может быть проблема в этом. Но если нет, то в любом случае у вас закралась
    где-то ошибка, т.к. если было всё верно то должно было всё работать.
- id: 168740
  author: Простой
  author_email: druzbasaytami@mail.ru
  author_url: ''
  date: '2013-06-24 13:53:45 +0400'
  date_gmt: '2013-06-24 09:53:45 +0400'
  content: 'Спасибо за замечание. А выполнять поочередно 2 SQL-запроса описанных выше
    нужно только в базы данных: _wp?'
- id: 168741
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-06-24 14:01:46 +0400'
  date_gmt: '2013-06-24 10:01:46 +0400'
  content: Не совсем понял вопрос. Что за база данных "_wp"? Если вы имеете в виду
    префикс, то он "wp_". И выполнять эти запросы нужно в ту базу, которую вы хотите
    поправить. Как правило, она всего одна у блога, с тем префиксом, который вы задавали
    при установке.
- id: 168744
  author: Простой
  author_email: druzbasaytami@mail.ru
  author_url: ''
  date: '2013-06-24 14:41:12 +0400'
  date_gmt: '2013-06-24 10:41:12 +0400'
  content: 'Просто у меня в phpmyadmin в левой панели - там где написано Недавние
    таблицы: есть надпись - Базы данных... и там у меня их несколько.'
- id: 168748
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-06-24 15:20:49 +0400'
  date_gmt: '2013-06-24 11:20:49 +0400'
  content: В корне сайта есть файл wp-config.php. В нем ищите название вашей базы
    данных  в константе DB_NAME.
- id: 168750
  author: Простой
  author_email: druzbasaytami@mail.ru
  author_url: ''
  date: '2013-06-24 15:38:07 +0400'
  date_gmt: '2013-06-24 11:38:07 +0400'
  content: "Просто у меня ещё и форум. Поэтому там (в phpmyadmin): _bb3, _blog, _wp.\r\n\r\nЯ
    так понимаю SQL-запросов нужно выбирать: _wp?"
- id: 168751
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-06-24 15:44:40 +0400'
  date_gmt: '2013-06-24 11:44:40 +0400'
  content: Если речь идёт о WordPress, то какая база написана в константе DB_NAME
    ту и надо фиксить. У меня впечатление, что мы будто бы о разных вещах говорим.
    Там может быть сотня баз у вас в MySQL, но нужено только ту что в DB_NAME.
- id: 168754
  author: Простой
  author_email: druzbasaytami@mail.ru
  author_url: ''
  date: '2013-06-24 15:51:13 +0400'
  date_gmt: '2013-06-24 11:51:13 +0400'
  content: |-
    Видимо я что-то не понимаю. Но вот тут:
    <a href="http:&#47;&#47;www.fotolink.su&#47;v.php?id=2b52548cc9f4670a3655494f8cea882d" rel="nofollow">тыц<&#47;a>
    Мне что нужно выбрать?
- id: 168765
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-06-24 17:20:42 +0400'
  date_gmt: '2013-06-24 13:20:42 +0400'
  content: |-
    Я не знаю. Т.к. я не знаю что у вас в константе DB_NAME прописано. Вы в wp-config.php загляните и сразу поймёте. Этот файл в корне вашего сайта на WordPress находится.

    Да, по аналогии я могу сказать, что скорее всего вам нужна база nikos127_wp, и скорее всего это она, но точно вы можете это узнать заглянув в wp-config.php. Это сложно? Вы не можете найти этот файл? Или там нет этой константы?
- id: 168768
  author: Простой
  author_email: druzbasaytami@mail.ru
  author_url: ''
  date: '2013-06-24 17:34:12 +0400'
  date_gmt: '2013-06-24 13:34:12 +0400'
  content: "Да, всё там есть. Просто саму эту базу не выбрать, а можно выбрать только:
    _bb3, _blog, _wp. Как собственно и показано на скриншоте. Поэтому возник вопрос.
    Теперь понял, что мне нужно выбрать: _wp то есть: nikos127_wp. И там уже делать
    \ SQL-запросы. \r\nТеперь должно всё получится )) \r\n\r\nБлагодарю вас за ответы
    и извините, если слишком расспрашивал вас. Удачи вам и вашему блогу, где множество
    интересных статей."
- id: 178006
  author: nik
  author_email: '08ip80@gmail.com'
  author_url: ''
  date: '2013-08-03 12:51:52 +0400'
  date_gmt: '2013-08-03 08:51:52 +0400'
  content: а можно таким способом хранить картинки с нескольких сайтов?
- id: 178028
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-08-03 14:08:13 +0400'
  date_gmt: '2013-08-03 10:08:13 +0400'
  content: Да, конечно можно. Если они все находятся на одном сервере, но если поддомен
    находится на другом серсере, то данный способ не прокатит и нужно уже менять загрузку
    и делать её удалённую, например, через FTP.
- id: 178201
  author: nik
  author_email: '08ip80@gmail.com'
  author_url: ''
  date: '2013-08-04 02:20:09 +0400'
  date_gmt: '2013-08-03 22:20:09 +0400'
  content: И на будущее, допустим у меня три сайта и все картинки хранятся на одном
    поддомене то- когда я захочу перенести все сайты на разные сервера(хостинги) то
    как мне отделить что к какому сайту и вотрой случай если я надумаю удалить картинки
    с определённого сайта?
- id: 178214
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-08-04 03:33:57 +0400'
  date_gmt: '2013-08-03 23:33:57 +0400'
  content: Если до этого никак их не разделить, то только вручную - ацкая работа.
    Нужно каждую картинку смотреть с какого она сайта и переносить. Ужас. Чтобы такого
    избежать нужно картинки сбрасывать в различные папки для каждого домена. 1 папка
    - 1 поддомен.
- id: 178878
  author: nik
  author_email: '08ip80@gmail.com'
  author_url: ''
  date: '2013-08-06 19:14:17 +0400'
  date_gmt: '2013-08-06 15:14:17 +0400'
  content: "перенёс картинки по вашей схеме\r\n\r\nу меня в теме скрипт обрабатывал
    миниатюры. теперь он их не может увидеть. показывает пустые кадратики.  но там(в
    настройках темы) есть кнопочка \"отключить, будут использоваться миниатюры wordpress\"
    . пришлось выключить.\r\nвот интересно почему он не хочет обрабатывать с поддомена?"
- id: 178891
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-08-06 19:58:19 +0400'
  date_gmt: '2013-08-06 15:58:19 +0400'
  content: Потому что он думает что они находятся в стандартном месте. Если бы скрипт
    использовал переменные WordPress то он подхватил бы это изменение или как-то так.
    Но разработчик об этом не подумал, наверно. В общем наверно надо менять сам скрипт
    если это критично =)
- id: 179004
  author: nik
  author_email: '08ip80@gmail.com'
  author_url: ''
  date: '2013-08-07 05:40:18 +0400'
  date_gmt: '2013-08-07 01:40:18 +0400'
  content: "Есть мысли что нужно менять в скрипте? (я смотрел, он довольно большой)
    \r\n\r\n<code><?php\r\n$themify_theme_config = array();\r\n\r\n$themify_theme_config['folders']
    = array(\r\n\t'images' => array(\r\n\t\t'src' => ''uploads&#47;''\r\n\t)\r\n);\r\n<&#47;code>\r\n\r\nя
    пробовал заменить 'uploads&#47;' в theme-config.php на свой адрес. видимо это
    не то)))\r\nя полный \"ноль\" в php))"
- id: 179064
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-08-07 13:56:45 +0400'
  date_gmt: '2013-08-07 09:56:45 +0400'
  content: |-
    Мысли? Каким образом? Я же не телепат! Хотя попробую помедитировать и увижу... мммммм... мммм... мммм... о... вижу.... я вижу... что в приведённом коде кучи опострофов, которых быть не должно. вместо:
    <code>'src' => ''uploads&#47;''<&#47;code>
    надо писать:
    <code>'src' => 'uploads&#47;'<&#47;code>
    Это думаете как-то связано с происходящим?
- id: 181336
  author: Роман
  author_email: Bioscom@mail.ru
  author_url: ''
  date: '2013-08-25 18:28:21 +0400'
  date_gmt: '2013-08-25 14:28:21 +0400'
  content: simple-post-thumbnails как этот плагин заставить чтобы подгрузал поддомены
    ?
- id: 181347
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-08-25 20:14:46 +0400'
  date_gmt: '2013-08-25 16:14:46 +0400'
  content: 'Думаю тут только один выход: переписывать сам плагин. Либо вы можете попросить
    помочь автора плагина. Маловероятно, что он поможет, но шанс есть. В противном
    случае придёться либо самому переписывать, либо искать кого на стороне.'
- id: 184472
  author: Вячеслав
  author_email: evpatoriya.crimea.ua@gmail.com
  author_url: http://evpatoriya-leto.crimea.ua/
  date: '2013-09-16 11:58:47 +0400'
  date_gmt: '2013-09-16 07:58:47 +0400'
  content: "Привет\r\nсделал все по инструкции,но хотелось бы еще реализовать <strong>\"подгружать
    с поддомена CSS с JS\"<&#47;strong>\r\nкак это реализовать ?\r\nНу а если бы выложили
    скрипт ленивой загрузки,то было бы вообще отлично ."
- id: 184479
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-09-16 12:43:56 +0400'
  date_gmt: '2013-09-16 08:43:56 +0400'
  content: Перекидываете CSS и JS на поддомен и меняете ссылки в шаблоне. Это касательно
    того что в самом шаблоне. А то что из плагинов, то будет посложнее, там много
    ручной работы. Нужно выдрать все стили и скрипты из плагинов перенести их на поддомен,
    заблокировать их загрузку стандартным способом и вместо этого с поддомена цеплять
    =)
- id: 184484
  author: Вячеслав
  author_email: evpatoriya.crimea.ua@gmail.com
  author_url: http://evpatoriya-leto.crimea.ua/
  date: '2013-09-16 13:38:27 +0400'
  date_gmt: '2013-09-16 09:38:27 +0400'
  content: "Я правильно понял \r\nпапку is находящуюся  на пути мой сайт&#47;wp-content&#47;themes&#47;моя
    тема&#47;js\r\nнужно перенести на поддомен  ?\r\nа как ,и где в шаблоне  поменять
    ссылки ?\r\nто же нужно проделать и с style.css шаблона ?"
- id: 192034
  author: Александр Ка.
  author_email: alekskamashev@yandex.ru
  author_url: ''
  date: '2013-10-26 22:19:25 +0400'
  date_gmt: '2013-10-26 18:19:25 +0400'
  content: "Здравствуйте. Сделал по инструкции в статье и картинки стали отображаться
    в статьях, но перестали отображаться миниатюры. \r\nХостер ответил следующее:
    \"Здравствуйте, обработка миниатюр идет по http-запросу:\r\n\r\nhttp:&#47;&#47;мойсайт.ru&#47;wp-content&#47;themes&#47;Palatino&#47;timthumb.php?src=http:&#47;&#47;image.мойсайт.ru&#47;2013&#47;10&#47;pensionnyj-fond-rossii-foto.jpg&amp;w=195&amp;h=100&amp;zc=1\r\n\r\nСудя
    по тому, что картинки из браузера доступны: image.мойсайт.ru&#47;2013&#47;10&#47;pensionnyj-fond-rossii-foto.jpg
    обработчик миниатюр не может запрашивать адрес по url\"\r\n\r\nНеужели все пределывать?
    Подскажите. Спасибо."
- id: 192046
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2013-10-26 23:32:24 +0400'
  date_gmt: '2013-10-26 19:32:24 +0400'
  content: Такой хороший сайт, и перестал обновляться. Очень жаль
- id: 192048
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-10-26 23:34:54 +0400'
  date_gmt: '2013-10-26 19:34:54 +0400'
  content: "И мне даже почти стыдно xDDD \r\n\r\nЯ совсем загружен стал. Планов на
    публикаций море, но некогда всё дописывать. Только на комментарии отвечаю по возможности
    =) Но может быть зимой продолжу... там будут долгие зимние вечера... в общем поживём
    &ndash; увидим =)"
- id: 192050
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-10-26 23:46:28 +0400'
  date_gmt: '2013-10-26 19:46:28 +0400'
  content: "Сложно сказать. Сам с таким не сталкивался ни разу. И вопрос уже за рамками
    статьи, всё что нужно работает. А ошибка в вашей теме уже. Судя по URL там у вас
    используется свой обработчик миниатюр, который и даёт сбой. Тут есть два пути:\n\n1)
    Поменять на совсем всю тему на другую обычную без изврата.\n2) Исправить ошибку
    на прямую в файле timthumb.php вашей темы. Это потребует знаний программирования.
    Либо сами, либо кого-то попросить за \"так\" или за деньги.\n\nНу либо всё вернуть
    на место. Но это не выход... это откат =) \n\nТакое бывает. Все темы уникальны,
    и где разработчик переписывает внутренние функции wordpress могу возникнуть различные
    баги."
- id: 192061
  author: Александр Ка.
  author_email: alekskamashev@yandex.ru
  author_url: ''
  date: '2013-10-27 01:55:52 +0400'
  date_gmt: '2013-10-26 21:55:52 +0400'
  content: Проделал данные манипуляции на втором сайте (где это было нужнее, но решил
    перестраховаться поэтому экспериментировал) и все вышло на ура. Чему очень рад.
    Очень рад вашему ресурсу долгих лет ему и вам тоже! Мон воодушевлен.
- id: 195302
  author: Nik
  author_email: '08ip80@gmail.com'
  author_url: ''
  date: '2013-11-11 10:49:56 +0400'
  date_gmt: '2013-11-11 06:49:56 +0400'
  content: Подскажите как вернут всё обратно по пунктам?
- id: 195333
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-11-11 16:55:33 +0400'
  date_gmt: '2013-11-11 12:55:33 +0400'
  content: "Если вы не удалили картинки со старого места (из папки upload), то достаточно
    будет удалить всё из настройки Медиафайлов (поля <em>Сохранять файлы в этой папке<&#47;em>
    и <em>Полный URL-путь к файлам<&#47;em>). Сделать обратные запросы в базу данных:\r\n\r\n<code>\r\nUPDATE
    wp_posts SET post_content = REPLACE(post_content, 'http:&#47;&#47;image.paperplane.su&#47;','http:&#47;&#47;paperplane.su&#47;wp-content&#47;uploads&#47;');\r\n\r\nUPDATE
    wp_posts SET guid = REPLACE(guid, 'http:&#47;&#47;image.paperplane.su&#47;','http:&#47;&#47;paperplane.su&#47;wp-content&#47;uploads&#47;')\r\n<&#47;code>\r\n\r\nНу
    и удалить из <em>.htaccess<&#47;em> редирект, если его туда вписывали.\r\n\r\nИ
    если не секрет, то в связи с чем связан откат?"
- id: 195341
  author: Nik
  author_email: '08ip80@gmail.com'
  author_url: ''
  date: '2013-11-11 18:07:53 +0400'
  date_gmt: '2013-11-11 14:07:53 +0400'
  content: "Всё спасибо. получилось.\r\n\r\nПросто этим сайтом не занимаюсь, а на
    хостинге поддомен только место занимает по тарифу, сейчас новый сайт буду делать
    а тариф не хочется увеличивать, вот и подумал, что лучше взять и удалить поддомен,
    чтоб было место для нового))"
- id: 195343
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-11-11 18:24:54 +0400'
  date_gmt: '2013-11-11 14:24:54 +0400'
  content: Ну да, логика верная, если сайт будет умирать потихонечку, то пусть хоть
    деньги не тратит лишние =)
- id: 199687
  author: Юрий
  author_email: kursolog@gmail.com
  author_url: http://kursolog.ru/
  date: '2013-11-26 23:03:37 +0400'
  date_gmt: '2013-11-26 19:03:37 +0400'
  content: Спасибо за статью! Все сделал буквально за 15 мин. Сайт http:&#47;&#47;kursolog.ru&#47;
- id: 224083
  author: Вячеслав
  author_email: stalk1969@gmail.com
  author_url: http://evpatoriya-leto.crimea.ua/
  date: '2014-02-11 17:13:50 +0400'
  date_gmt: '2014-02-11 13:13:50 +0400'
  content: "Привет\r\nу меня такая же проблема как и у Nik\r\nпереехал на другой хостинг,
    там что то не сростается ...грешу на перенос картинок на поддомен\r\nсегодня опять
    перенес ns на старый хостинг, и хочу вернуть все как было раньше\r\nиз дириктории
    поддомена перенес все назад в папку upload\r\nплагин отключил (предварительно
    убрав настройки)\r\nзапрос в базу данных указанный выше выполнил\r\nиз .htaccess
    редирект удалил\r\nвсе вроде нормально, но...новые картинки не отражаются\r\nпрописывается
    только titl, а самой картинки нет\r\nчто я сделал не так?"
- id: 224087
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-02-11 17:46:39 +0400'
  date_gmt: '2014-02-11 13:46:39 +0400'
  content: Вы поглядите откуда картинки эти пытаются грузиться в HTML-коде страницы.
    И уже от этого отталкивайтесь. И плюс проверьте куда эти картинки на самом деле
    грузятся. Вполне возможно, что настройки плагина почему-то остались и он пытается
    грузить по старому пути. Проверьте.
- id: 224096
  author: Вячеслав
  author_email: stalk1969@gmail.com
  author_url: http://evpatoriya-leto.crimea.ua/
  date: '2014-02-11 18:37:38 +0400'
  date_gmt: '2014-02-11 14:37:38 +0400'
  content: "В том то и дело, что грузятся с поддомена, и по ходу загружаются туда
    же...\r\nсам плагин пока не удалял\r\nа просто отключил\r\nможет в этом проблема?"
- id: 224105
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-02-11 19:52:02 +0400'
  date_gmt: '2014-02-11 15:52:02 +0400'
  content: Может быть. Удалите, если что восстановить его не долго. Ещё может быть
    в <em>wp-config.php<&#47;em> он мог положить константу с этим путём.
- id: 224110
  author: Вячеслав
  author_email: stalk1969@gmail.com
  author_url: http://evpatoriya-leto.crimea.ua/
  date: '2014-02-11 20:44:45 +0400'
  date_gmt: '2014-02-11 16:44:45 +0400'
  content: "SlowProg, спс\r\nбуду искать."
- id: 225772
  author: Ник
  author_email: mzimer@i.ua
  author_url: http://a-orta.com
  date: '2014-03-02 00:25:27 +0400'
  date_gmt: '2014-03-01 20:25:27 +0400'
  content: "Здравствуйте, кучу времени потратил на попытки перенести картинки на поддомен,
    руководствуясь вашей статьей,увы но мои попытки не увенчались успехом...\r\nУ
    меня WP 3.8.1 и при вводе запроса в SQL ни одной строки не изменяется.\r\nЯ в
    сайтостроении новичок , помогите пожалуйста ! :)"
- id: 225773
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-03-02 00:31:27 +0400'
  date_gmt: '2014-03-01 20:31:27 +0400'
  content: "Ну, сложно помочь в слепую. Но первое, что приходит в голову, это вы не
    верно указываете название таблиц. Может быть у вас используется другой префикс
    (не <em>wp_<&#47;em>) и соответственно ничего не работает. Точно такие таблицы
    существуют? \n\nЕсли с этим всё в порядке, то может быть у вас и нечего менять,
    может в статьях нет картинок? \n\nИ ещё предположение: неверно составлена замена
    в функции REPLACE. Может быть у вас там лишний символ закрался или что-то ещё."
- id: 225776
  author: Ник
  author_email: mzimer@i.ua
  author_url: http://a-orta.com
  date: '2014-03-02 00:37:41 +0400'
  date_gmt: '2014-03-01 20:37:41 +0400'
  content: "Может скрин что-то прояснит \r\nuploads.a-orta.com&#47;1.png"
- id: 225780
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-03-02 01:54:38 +0400'
  date_gmt: '2014-03-01 21:54:38 +0400'
  content: "Вы поглядите как у вас картинки вставляются в статьи. У вас домен в url
    пишется с <em>www<&#47;em>. Соответственно искать нужно <em>http:&#47;&#47;www.a-orta.com&#47;wp-content&#47;uploads&#47;<&#47;em>.
    \r\n\r\nИ ещё, сразу на живую на продакшене это делать я бы не советовал. Действия
    довольно радикальны и в случае чего может всё плохо кончиться. Хотя бы на локалке
    потренировались бы. И как минимум вы должны иметь бэкапы базы и всех файлов wordpress.
    Надеюсь они у вас есть. Это я на всякий случай сказал."
- id: 225803
  author: Ник
  author_email: mzimer@i.ua
  author_url: ''
  date: '2014-03-02 10:45:03 +0400'
  date_gmt: '2014-03-02 06:45:03 +0400'
  content: "Спасибо, все получилось!\r\nБэкапы делаю всегда перед какими либо \"махинациями\"
    печальный опыт имеется ;)\r\nЕще раз - спасибо"
- id: 225807
  author: Ник
  author_email: mzimer@i.ua
  author_url: ''
  date: '2014-03-02 13:35:39 +0400'
  date_gmt: '2014-03-02 09:35:39 +0400'
  content: Не пойму в чем дело... В БД все запросы выполнены правильно, а в коллекции
    медиафайлов адреса не меняются.... в постах адреса картинок новые
- id: 225811
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-03-02 14:24:01 +0400'
  date_gmt: '2014-03-02 10:24:01 +0400'
  content: В коллекции не меняются? Всмысле, при новых загрузках старые пути, а загружается
    на поддомен? Я не совсем понял в чём проблема. Плагин WP Original Media Path установили,
    пути поменяли?
- id: 225842
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.astrakraft.ru/
  date: '2014-03-03 00:09:12 +0400'
  date_gmt: '2014-03-02 20:09:12 +0400'
  content: "Андрей, здравствуйте. Как можно узнать, выполнился ли запрос? После обновления
    проверяю, адреса у картинок старые. Делала сначала все по инструкции. Потом попробовала
    пойти еще по другому пути: поскольку сайт переименовала из домена третьего уровня
    во второй (служба поддержки сделала так, что работает сайт по двум адресам пока),
    в запросе в первом адресе прописала старый, так как картинку на нем хранились,
    т.е. \r\nUPDATE wp_posts SET post_content = REPLACE(post_content, 'http:&#47;&#47;старый
    адрес&#47;wp-content&#47;uploads&#47;','http:&#47;&#47;image.новый адерс&#47;')\r\nно
    никаких изменений. И редирект сделать не могу, выдает ошибку"
- id: 225843
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.astrakraft.ru/
  date: '2014-03-03 00:15:45 +0400'
  date_gmt: '2014-03-02 20:15:45 +0400'
  content: 'Примерно такая же проблема как у Ника, только наоборот: в медиафайлах
    новый адрес, а в постах старый.'
- id: 225844
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-03-03 00:21:19 +0400'
  date_gmt: '2014-03-02 20:21:19 +0400'
  content: Не могу ничего сказать кроме как скорее всего вы не верно подменяете что-то
    или запрос не верный. Как у Ника, он забыл www, и вы что-то не так делаете. Посмотрите
    какие в постах url на картинки, может вы что-то не так пишете.
- id: 225848
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.astrakraft.ru/
  date: '2014-03-03 01:25:30 +0400'
  date_gmt: '2014-03-02 21:25:30 +0400'
  content: "У меня везде без WWW. Я здесь напишу как есть, а Вы удалите лишнее. У
    меня был сайт http:&#47;&#47;ncuxolog.astrakraft.ru, а стал http:&#47;&#47;ncuxolog.ru.
    В Параметры-Медиафалы я проставила &#47;home&#47;p00000&#47;www&#47;image.ncuxolog.ru
    (так выдала та штука, про котрую писали)  и http:&#47;&#47;image.ncuxolog.ru\r\nВ
    запросе сначала прописала \r\nUPDATE wp_posts SET post_content = REPLACE(post_content,
    'http:&#47;&#47;ncuxolog.ru&#47;wp-content&#47;uploads&#47;','http:&#47;&#47;image.ncuxolog.ru&#47;')\r\n\r\nUPDATE
    wp_posts SET guid = REPLACE(guid, 'http:&#47;&#47;ncuxolog.ru&#47;wp-content&#47;uploads&#47;','http:&#47;&#47;image.ncuxolog.ru&#47;')\r\n\r\nа
    потом сделала новые запросы\r\nUPDATE wp_posts SET post_content = REPLACE(post_content,
    'http:&#47;&#47;ncuxolog.astrakraft.ru&#47;wp-content&#47;uploads&#47;','http:&#47;&#47;image.ncuxolog.ru')\r\n\r\nUPDATE
    wp_posts SET guid = REPLACE(guid, 'http:&#47;&#47;ncuxolog.astrakraft.ru&#47;wp-content&#47;uploads&#47;','http:&#47;&#47;image.ncuxolog.ru&#47;')\r\n\r\nСейчас
    медиафайлы имеют такой вид \r\nhttp:&#47;&#47;image.ncuxolog.ru&#47;2014&#47;03&#47;pryzhki....\r\n\r\nА
    в статье http:&#47;&#47;ncuxolog.astrakraft.ru&#47;wp-content&#47;uploads&#47;2014&#47;03&#47;sposoby...."
- id: 225850
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.astrakraft.ru/
  date: '2014-03-03 01:33:35 +0400'
  date_gmt: '2014-03-02 21:33:35 +0400'
  content: Я в службу поддержки хостинга написала еще по подобному вопросу (изменение
    внутренних ссылок, тоже запросы не сработали). Они предложили сделать экспорт
    БД и там вручную менять ссылки :)
- id: 225910
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.astrakraft.ru/
  date: '2014-03-03 16:10:16 +0400'
  date_gmt: '2014-03-03 12:10:16 +0400'
  content: "Андрей, решился вопрос. Оказывается у меня не wp, а wp3 (изначально сайт
    оказался привязан к другому - при создании бд сделали ошибку). Так что все работает.
    Спасибо большое, что познакомили с работой SQL, иначе пришлось бы вышивать все
    ссылки в БД вручную. \r\nТолько вот не пойму почему не могу редирект сделать.
    Ведь старый сайт нужно удалять, а-то их получается два. Как еще поисковики к этому
    отнесутся. Кстати (вопрос не по теме), а как быть с сайтами в вебмастере чндекса
    и гугла? они меняют адрес или нужно новый добавлять?"
- id: 225914
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-03-03 17:21:14 +0400'
  date_gmt: '2014-03-03 13:21:14 +0400'
  content: |-
    В вебмастере нужно будет добавить новые сайты.

    На счёт редиректа, то у вас просто сервер не Apache. А я как-то забыл в статье указать что это для Апача только. Вам нужно уже либо самим писать для LiteSpeed (вроде он у вас) либо обратиться в поддержку.
- id: 225923
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.ru/
  date: '2014-03-03 19:20:18 +0400'
  date_gmt: '2014-03-03 15:20:18 +0400'
  content: "Андрей, нужна Ваша помощь, я ничего понять не могу. Написала в хостинг
    про перенаправление, которое нужно организовать для старого адреса сайта. Они
    написали следующее \r\nВы не можете создать поддомен http:&#47;&#47;старый адрес
    сайта.ru по причине того что у вас есть DNS зона для данного домена. Удалените
    данную DNS зону, после чего вы сможете его добавить в раздел сайты https:&#47;&#47;support...\r\nМне
    интересно, днс учитывается поисковыми системами? Не получится ли так, что потом
    и редирект мне не поможет - это сайт (старый) будет рассматриваться как новый.\r\nА
    <strong>до этого<&#47;strong> они писали:\r\nДанную проблему решили немного иначе
    и наиболее правильно.\r\nСейчас у Вас на заказе хостинга оставили сайт новый.ru,
    а сайт старый.ru (перед удалением проверили, он был пуст) и название сайта старый.ru
    добавили как псевдоним к сайту новый.ru\r\nВ общем, Вы меня сейчас спросите, чего
    же я хочу. Не знаю. Не знаю, что делать дальше. Боюсь, что яндекс не поймт, что
    новый сайт-это тот же старый, но с новым адресом. Я так поняла, что мне нужно
    добиься склейки (согласно инструкции яндекса, в которой я тоже мало что поняла)."
- id: 225924
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.ru/
  date: '2014-03-03 19:23:26 +0400'
  date_gmt: '2014-03-03 15:23:26 +0400'
  content: 'У меня главная страница сайта сейчас открывается по двум адресам: староым
    и новым.'
- id: 225925
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-03-03 19:32:44 +0400'
  date_gmt: '2014-03-03 15:32:44 +0400'
  content: В принципе если они сделал старый домен зеркалом нового, то всё норм должно
    быть. Поисковики точно всё поймут. Думаю вам не стоит волноваться. Но редирект
    вообще пригодился бы для перенаправления трафика. Чтобы человек вошедний на старый
    сайт был брошен на аналогичную страницу нового. Это был бы верный подход. Плюс
    есть шанс, что поисковик вес ссылающихся ссылок на старый домен перекинет на новый,
    но не факт.
- id: 225929
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.astrakraft.ru/
  date: '2014-03-03 20:24:55 +0400'
  date_gmt: '2014-03-03 16:24:55 +0400'
  content: Андрей, а как быть с перенапрвлением картинок? не могли бы вы помочь с
    кодом 301редиректа?
- id: 225938
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-03-03 21:45:00 +0400'
  date_gmt: '2014-03-03 17:45:00 +0400'
  content: Не могу ничего точно сказать. C сервером LiteSpeed не имел дело никогда.
    Думаю с этим вопросам лучше к вашим администраторам. Я могу <a href="https:&#47;&#47;www.google.ru&#47;search?client=safari&rls=en&q=LiteSpeed+%D1%80%D0%B5%D0%B4%D0%B8%D1%80%D0%B5%D0%BA%D1%82&ie=UTF-8&oe=UTF-8&gfe_rd=cr&ei=-K0UU--gB4iV4ASHhYC4BQ#newwindow=1&q=litespeed+redirect+301&rls=en"
    rel="nofollow">погуглить<&#47;a>, но мой ответ не будет точным, а больше проблем
    может вызвать, т.к. проверить мне негде поскольку LiteSpeed платный. Так что лучше
    спросите своих админом.
- id: 225941
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.ru/
  date: '2014-03-03 22:31:53 +0400'
  date_gmt: '2014-03-03 18:31:53 +0400'
  content: "Андрей, сейчас проверила, если вбить в адресную строку запись со старым
    адресом, то сайт выдает ошибку 404. То есть действующая только главная страница
    старого сайта, а других уже как бы не сущетвует. \r\nИ все-таки Вы можете что-нибудь
    сказать про DNs сайта."
- id: 225942
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.ru/
  date: '2014-03-03 22:37:59 +0400'
  date_gmt: '2014-03-03 18:37:59 +0400'
  content: Спасибо, Андрей. Я понимаю, что достала Вас. Извините :)
- id: 225956
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-03-04 01:32:42 +0400'
  date_gmt: '2014-03-03 21:32:42 +0400'
  content: Честно, я не понял написанное про ДНС, не потому что я глуп, а потому что
    всего контекста нет. И я не догоняю ситуации в целом. Или я уже устал. Но так
    или иначе поисковики поймут где у вас главный домен по вашему robots.txt, но провал
    в выдаче будет всё равно. Если поисковики подхватят всё верно, то провал не будет
    существенный.
- id: 226039
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.astrakraft.ru/
  date: '2014-03-04 17:42:09 +0400'
  date_gmt: '2014-03-04 13:42:09 +0400'
  content: Спасибо большое, Андрей. Думаю, будет лучше мне сейчас не заморачиваться
    пока по этому вопросу и не мучить вас и хостинг. :)
- id: 226401
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.ru
  date: '2014-03-08 23:23:26 +0400'
  date_gmt: '2014-03-08 19:23:26 +0400'
  content: Здравствуйте, Андрей. Снова я на связи :) После того, как я перенесла картинки
    на поддомен, у меня  стал долго грузиться фавикон (то есть вместо картинки идет
    загрузка в то время как страница уже загрузилась). И постоянно слетают настройки
    в файте style в sache. Это как-то связано одно с другим?
- id: 226404
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-03-09 01:21:35 +0400'
  date_gmt: '2014-03-08 21:21:35 +0400'
  content: "Фавикон у вас редиректом грузится. Я так понял. Т.е. он подтягивается
    со старого поддомена, но редиректом на новый кидает. При этом сам фавикон подгружается
    из body а не из head. Может это всё как-то связано.\r\n\r\nНа счёт стилей не понял.
    Как это \"слетают\"? Меняются на какие-то другие? Так или иначе, это не должно
    никак повлиять. Поддомен тоже самое что и ваш домен основной (на уровне сервера),
    и по идеи, всё одно. МОжет проблема в самом сервере? Например, время ожидания
    ответа слишком мало и из-за большого количества запросов не всегда все файлы отдаются.
    Хотя звучит странно, обычно такого не бывает. Обычно статику nginx отдаёт а он
    это делает быстро."
- id: 226407
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.ru
  date: '2014-03-09 02:37:12 +0400'
  date_gmt: '2014-03-08 22:37:12 +0400'
  content: 'Я недавно изменила цвет шрифта на сайте (сайтбар, ссылки). Спустя какое-то
    время возвращаются старые настройки, то есть те цвета, что были ранее, приходится
    менять заново. И так практически каждые 2-3 дня :) Сама не могу понять. Причем
    меняются именно на поддомене. Я добавила папку с картинками темы на основной домен
    (они в двух местах): так на основном стили сохраняются, а на поддомене меняются.'
- id: 226409
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-03-09 02:45:10 +0400'
  date_gmt: '2014-03-08 22:45:10 +0400'
  content: Эм. Ну я даже не знаю. Ваше кеширование может портачит. Хотя вряд ли. Опять
    же специфическая проблема &ndash; к хостеру. Но скорее всего что-то вы упускаете.
    Не может оно само менять содержимое файлов (конечно может, но этот код должны
    написать и вряд ли это сделали вы), потому может что-то вы делаете что меняет
    стили. Подумайте.
- id: 226411
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.ru
  date: '2014-03-09 02:49:22 +0400'
  date_gmt: '2014-03-08 22:49:22 +0400'
  content: Да, изменила путь к фавикону в head. Теперь нормально отображается. Спасибо.
- id: 226415
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.ru
  date: '2014-03-09 03:21:56 +0400'
  date_gmt: '2014-03-08 23:21:56 +0400'
  content: Возможно. Конечно, перед тем, как это происходит, я что-то делаю, но никак
    не в этом файле. Я подумаю еще:)
- id: 236854
  author: Первая запись | SECERA
  author_email: ''
  author_url: http://secera.ru/%d0%bf%d0%b5%d1%80%d0%b2%d0%b0%d1%8f-%d0%b7%d0%b0%d0%bf%d0%b8%d1%81%d1%8c/
  date: '2014-08-15 16:58:53 +0400'
  date_gmt: '2014-08-15 12:58:53 +0400'
  content: "[&#8230;] изменить на другой, например, для того чтобы сделать картинки
    на поддомене или просто чтобы был более эстетичный и радующий глаз [&#8230;]"
- id: 245878
  author: Glad
  author_email: vindus123@yandex.ru
  author_url: http://gladweb.ru
  date: '2015-01-18 10:55:34 +0300'
  date_gmt: '2015-01-18 06:55:34 +0300'
  content: "Спасибо вам за подробную инструкцию!\r\nПрименил ее на своем <a href=\"http:&#47;&#47;gladweb.ru&#47;\"
    rel=\"nofollow\">блоге<&#47;a>, скорость заметно улучшилась."
- id: 246720
  author: ауромаг
  author_email: info@auromag.ru
  author_url: http://auromag.ru
  date: '2015-02-05 17:48:36 +0300'
  date_gmt: '2015-02-05 13:48:36 +0300'
  content: "а смысл таких действий? уменьшить трафик из поисковиков ?\r\nпоиск по
    картинкам как будет идти у яндекса и гугла?\r\nкартинка это ведь тоже контент.
    а они на поддомене.\r\nи кому этот контент даст вес?\r\nникому получается\r\nну
    или поддомену\r\nвот и получается - скорость загрузки увеличил (тоже вопрос),
    а трафик поисковиков снизил.\r\nсам себя перехитрил )))"
- id: 246735
  author: bobby
  author_email: piton8889@yandex.ru
  author_url: ''
  date: '2015-02-06 02:24:17 +0300'
  date_gmt: '2015-02-05 22:24:17 +0300'
  content: вот и я думаю, есть ли смысл терять поисковый трафик по картинкам в связи
    с хранением изображений на поддомене...как вариант - хранить картинки с помощью
    cdn, но что тогда в данном случае с трафиком по картинкам будет?
- id: 246780
  author: ауромаг
  author_email: info@auromag.ru
  author_url: http://auromag.ru
  date: '2015-02-06 21:04:08 +0300'
  date_gmt: '2015-02-06 17:04:08 +0300'
  content: терять трафик только ради ускорения загрузки пары картинок? смысл довольно
    сомнительный. точнее  - никакого смысла в этом нет. просто вот даже на этом сайте
    было бы больше трафика по картинкам и уже рекламка бы бодрее кликалась и отбивалась.
    но автору сайта виднее.
- id: 248012
  author: lyrics
  author_email: m3lkiy@tut.by
  author_url: http://showmelyrics.com
  date: '2015-03-10 13:48:42 +0300'
  date_gmt: '2015-03-10 09:48:42 +0300'
  content: "Вчера решил у себя перенести js, css, images на поддомены. Что могу сказать:
    вернул всё обратно :D\r\nОтклик страницы не улучшился, в моих планах было улучшить
    его за счёт переноса некоторых, синхронно грузящихся, изображений на поддомен.
    В результате изображения, джиэс и сиэсэс стали доставлятся до 3-х раз дольше....\r\nЕсли
    уж и пытатся разогнаться за счёт статики, то, имхо нужно смотреть в сторону CDN..\r\nА
    так самое тру грузить всё, что возможно асинхронно и будет вам скорость"
- id: 248065
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2015-03-12 19:28:46 +0300'
  date_gmt: '2015-03-12 15:28:46 +0300'
  content: Всё верно, на одном слабом сервере результат может быть нулевой или обратный.
    Как вы и заметили, лучше CDN или просто другой свой сервер отдельно под статику.
- id: 250283
  author: Мастер Мысли
  author_email: master.mysli@yandex.ru
  author_url: http://tybog.ru
  date: '2015-05-16 14:51:21 +0300'
  date_gmt: '2015-05-16 10:51:21 +0300'
  content: "Привет SlowProg! Статья отличная, из всего - того, что я искал по подобной
    проблеме. В общем я всё сделал как ты здесь описал, однако, картинки все-равно
    не идут в директорию на поддомене. Т.е. WP ругается красными буквами - \"Не могу
    создать директорию ...<em>директория моего поддомена<&#47;em> Проверьте, доступна
    ли родительская директория для записи.\" Подумал, возможно проблема в правах на
    запись папки. Выставил права на запись \"777\". Опять пытаюсь загрузить и опять
    шляпа. В чём может быть дело ? Предположу, что новая версия WP (она же ныне -
    \"4.2.2\") не хочет слушать этот плагин WP Original Media Path - но это лишь предположение.
    Прошу помощи, так как нигде не могу найти про подобную проблему! \r\n\r\nДа, и
    ещё есть одна проблема: у меня поддомен закрыт от индексации для ПС, как в админке
    WP - в части настройки - \"...попросить поисковые системы не индексировать сайт\",
    так и в файле robots - \"User-agent: * Disallow: &#47;\"  Будут ли изображения
    появляться в индексе Яндекса и Гугла. Если нет тогда как граммотно закрыть весь
    субдомен, а открыть только лишь папку с картинками ?\r\n\r\nСпасибо заранее! Жду
    помощи!"
- id: 250743
  author: Мастер Мысли
  author_email: master.mysli@yandex.ru
  author_url: http://tybog.ru
  date: '2015-05-25 22:36:41 +0300'
  date_gmt: '2015-05-25 18:36:41 +0300'
  content: "Привет ещё раз SlowProg! Пожалуйста ответь на это предыдущее моё письмо,
    а то я не знаю где ответ смотреть, нигде не могу найти ответ в google\r\n\r\nСпасибо
    SlowProg!"
- id: 252676
  author: Leo
  author_email: redshrey2013@yandex.ru
  author_url: ''
  date: '2015-09-21 10:53:30 +0300'
  date_gmt: '2015-09-21 06:53:30 +0300'
  content: А на самом сайте удалить изображения? Я удалил и они стали иконками. Может
    не действует теперь плагин (перерабатывающий картинки под нужный размер)?
- id: 289043
  author: БлагоѨръ
  author_email: BlagoYar.Tishina@gmail.com
  author_url: https://xn----7sbbbl5aatxgwz3fve.tk
  date: '2016-10-23 20:58:11 +0300'
  date_gmt: '2016-10-23 16:58:11 +0300'
  content: После всего проделанного всё нормально, кроме одного - картинки стали ссылками,
    то бишь отображается название, а не само изображение.
- id: 290633
  author: Вова
  author_email: wowa1986@inbox.ru
  author_url: ''
  date: '2016-11-10 14:17:56 +0300'
  date_gmt: '2016-11-10 10:17:56 +0300'
  content: "А что если я хочу хранить файлы на другом сервере?\r\n\r\nТо есть:\r\n\r\n1.
    У меня есть физический выделенный сервер №1\r\n2. Есть дополнительный физический
    сервер №2\r\n\r\nМогу ли я на отдельный физический сервер (где расположен субдомен)
    загружать файлы? Или обязательно субдомен должен находиться на одном сервере с
    доменом?\r\n\r\nБлагодарю!"
---
<p><a href="http:&#47;&#47;image.paperplane.su&#47;2012&#47;05&#47;subdomen-pictures.png"><img class="alignleft size-medium wp-image-2505" title="Картинки на поддомен" src="http:&#47;&#47;image.paperplane.su&#47;2012&#47;05&#47;subdomen-pictures-300x300.png" alt="Картинки на поддомен" width="300" height="300" &#47;><&#47;a>Довольно давно случайно прочитал на одном форуме обсуждение одного интересного метода ускорения загрузки сайта, он заключается в том, чтобы все <strong>картинки хранить на поддомене<&#47;strong>. Прочитал, решил реализовать у себя в блоге WordPress, но руки дошли только сейчас, потому сразу решил и поcт про это написать. Ну дык вот, соль в том, что браузеры могут грузить сайт в несколько потоков с разных сайтов, например так можно спокойно подключать различные библиотеки или стили расположенные на других ресурсах и они все (с небольшими допущениями) будут загружаться параллельно, что соответственно увеличивает скорость загрузки страницы. Но мы это и так делаем (подключаем удаленно JS и CSS), а картинки почему то многие игнорируют в этом плане. Надо исправить это положение. Поскольку поддомен это такой же отдельный сайт как и все остальные, то поэтому дальше мы не пойдем, а расположим все изображения на поддомене нашего WordPress блога.</p>
<p>Те кто может подумать, что это геморрой и что игра не стоит свеч, то, во-первых, то не так сложно как кажется и не займет уйму времени, а во-вторых, скорость загрузки страницы в нынешние времена является одним из важных параметров ранжирования в поиковых системах. Да и посетители будут меньше раздражаться в ожидании прогрузки страницы напичканной изображениями. Отсюда вытекает, что как минимум нужно попробовать! Приступим...</p>
<h2>Создание поддомена<&#47;h2><br />
Первым делом нам потребуется новый поддомен третьего уровня. На каждом хостинге есть функционал позволяющий создать поддомены для ваших сайтов. Останавливаться подробно на этом я не буду, т.к. хостинги у всех разные и перечислять все я не буду, а как создать поддомен наверняка описано в FAQ'е вашего хостера. Почитайте, если не знаете. Обычно все сводится к указанию имени поддомена и созданию папки для хранения файлов поддомена. А назвать его можно как угодно, свой я назвал следующим образом:<br />
[cce lang="text"]image.paperplane.su[&#47;cce]<br />
У меня такая привычка, все в единственном числе называть. Программирование привило, классы и модули всегда в единственном числе называл. Ну да в общем не важно. Хочу обратить ваше внимание на то, что поддомен обычно создается не сразу, а в течении некоторого времени, приблизительно час. Обычно у хостеров написано, как долго они создаются. Так что пока не спешите, а идите лучше чайку налейте.</p>
<p>После создания поддомена, мы перейдем к самой ответственной части, но вначале давайте закроем сайт от посторонних глаз. Негоже смотреть посетителям на то, как ломается ваш сайт (исчезают все картинки) в процессе производимых манипуляций. Для этого я советую повесить какую-нибудь страницу-заглушку повествующую о том, что <a title="40 разных шаблонов " href="http:&#47;&#47;paperplane.su&#47;40-razlichnyx-tem-i-shablonov-sajt-v-razrabotke&#47;" target="_blank">сайт на реконструкции<&#47;a>.</p>
<h2>Изменение URL-пути медиафайлов<&#47;h2><br />
Для изменения стандартной папки хранения изображений необходимо в админке пройти в <em>Параметры<&#47;em> -> <em>Медиафайлы<&#47;em>. Там вы увидите раздел <em>Загрузка файлов<&#47;em>, вот он то вам и нужен. В нем находится два поля и обычно они оба пустые. Первое необходимо для указания папки, в которой сохранять изображения (по умолчанию <em>wp-content&#47;uploads<&#47;em>), а второе - это <em>Полный URL-путь к файлам<&#47;em>. Изменим оба поля.</p>
<p>В первое поле нужно добавить полный путь до папки для сохранения файлов в вашей файловой системе на сервере. Т.е. тот путь который ведет к домену второго уровня. У всех хостеров эти пути отличаются. Но есть один универсальный способ, чтобы определить путь до папки на сервере:</p>
<ul>
<li>Создаем файл <em>path.php<&#47;em> и бросаем в него следующий код:<br />
[cce lang="php"]<?php<br />
	$p = getcwd();<br />
	echo $p;<br />
?>[&#47;cce]<br />
<&#47;li></p>
<li>Кидаем этот файл в директорию поддомена, которую вы указали при создании самого поддомена.<&#47;li>
<li>Вызываем в браузере этот файл на исполнение, для этого просто наберите в адресной строке:<br />
[cce lang="text"]http:&#47;&#47;image.paperplane.su&#47;path.php[&#47;cce]<br />
На экране высветится путь до папки, в которой расположен этот файл. Этот путь вам и нужен.<&#47;li><br />
<&#47;ul><br />
Берем отобразившийся путь и вставляем в первое поле. Вот и готово. Не забудьте удалить за ненадобностью файл <em>path.php<&#47;em>.</p>
<p>Во второе поле вставляем адрес нашего нового поддомена и должно получится примерно следующее (с учетом, что у вас свой путь и свой домен):<br />
<a href="http:&#47;&#47;image.paperplane.su&#47;2012&#47;05&#47;subdomen-upload-url.jpg"><img class="aligncenter size-large wp-image-2464" title="Изменить папку и URL-путь медиафайлов" src="http:&#47;&#47;image.paperplane.su&#47;2012&#47;05&#47;subdomen-upload-url-640x100.jpg" alt="Изменить папку и URL-путь медиафайлов" width="640" height="100" &#47;><&#47;a><br />
После этого, всякий раз когда вы будите загружать картинку или другой медиафайл на сайт, то они все будут сохранятся на вашем поддомене все в той же структуре, что и раньше.</p>
<blockquote><p>ВНИМАНИЕ! Если у вас в медиафайлах нет таких полей, то это значит у вас последний WordPress. Разработчики не понятно почему их убрали начиная с версии 3.5. К сожалению единственный способ их восстановить и использовать это плагин <a href="http:&#47;&#47;wordpress.org&#47;plugins&#47;wp-original-media-path&#47;" target="_blank">WP Original Media Path<&#47;a>.<&#47;blockquote></p>
<h2>Изменение URL-пути для старых записей<&#47;h2><br />
В ваших старых постах наверняка использовались картинки, которые теперь должны находится в другом месте. И первым делом их нужно перенести в это другое место. Для этого с помощью функционала хостинга или любого FTP-клиента перенесите все содержимое папки <em>wp-content&#47;uploads<&#47;em> в корень вашего поддомена. Наверно это самый продолжительный момент во всем этом мануале. Обычно в блогах целые горы картинок и потому переноситься они будут долго, как раз поддомен успеет создаться.</p>
<p>После переноса картинок, необходимо поменять все старые пути изображений в постах на новый. Для этого всего лишь нужно дописать имя поддомена. Сделать это очень легко с помощью инструмента <strong>PHPMyAdmin<&#47;strong>:<br />
<a href="http:&#47;&#47;image.paperplane.su&#47;2012&#47;05&#47;subdomen-phpmyadmin.jpg"><img class="aligncenter size-large wp-image-2463" title="Провести запросы в PHPMyAdmin" src="http:&#47;&#47;image.paperplane.su&#47;2012&#47;05&#47;subdomen-phpmyadmin-640x223.jpg" alt="Провести запросы в PHPMyAdmin" width="640" height="223" &#47;><&#47;a><br />
Это веб-интерфейс для администрирования MySQL, который есть практически на каждом хостинге. С помощью него можно провести SQL-запрос, который позволит нам поменять пути во всех записях. В моем случаи запрос следующий:<br />
[cce lang="sql"]UPDATE wp_posts SET post_content = REPLACE(post_content, 'http:&#47;&#47;paperplane.su&#47;wp-content&#47;uploads&#47;','http:&#47;&#47;image.paperplane.su&#47;')[&#47;cce]<br />
Конечно в вашем случаи название домена и поддомена будут отличаться, так что обязательно поменяйте на свои. И обратите внимание на то, что ваш префикс таблицы (в данном случаи <em>wp<&#47;em>) тоже может отличаться.</p>
<p>После этого все пути в постах обновятся, но это не все. Теперь нужно исправить ссылки на картинки в коллекции медиафайлов. Для этого необходимо провести следующий SQL-запрос:<br />
[cce lang="sql"]UPDATE wp_posts SET guid = REPLACE(guid, 'http:&#47;&#47;paperplane.su&#47;wp-content&#47;uploads&#47;','http:&#47;&#47;image.paperplane.su&#47;')[&#47;cce]<br />
Опять же, не забудьте поменять домены и префикс на ваши собственные, чтобы не было казусов. И еще один момент: возможно может быть такое, что в базе в адресах будет стоять <em>www<&#47;em>, тогда вам придется продублировать оба запроса, но уже с тройным <em>w<&#47;em>. Обычно этого не бывает, но мало ли - имейте в виду. После этого все ваши картинки из старых постов будут браться с поддомена.</p>
<h2>Редирект для поисковиков<&#47;h2><br />
Напоследок остается один тонкий нюанс, который заключается в том, что хоть картинки мы и перенесли, но в индексе поисковиков находятся картинки по старым адресам. Это может сделать все наши картинки неуникальными, что снизит их влияние на ранжирование вашего сайта, а мы ведь не хотим терять посетителей! Для этого необходимо известить поисковую машину о том, что картинки переехали навсегда в другое место. Для этого используется <a title="301 Moved Permanently" href="http:&#47;&#47;ru.wikipedia.org&#47;wiki&#47;Список_кодов_состояния_HTTP#301" rel="nofollow" target="_blank">301 редирект<&#47;a>, который мы укажем в нашем файле <em>.htaccess<&#47;em>. Для тех, кто не знает, это файл дополнительной конфигурации сервера. Таких файлом может быть много, по одному на каждую директорию. Но нам нужен тот, что лежит в корне нашего основного домена (не поддомена, не перепутайте), если его там нет, то обязательно создайте (в названии вначале идет точка). В него необходимо разместить следующий код:<br />
[cce lang="text"]RedirectMatch 301 ^&#47;wp-content&#47;uploads&#47;(.*)$ http:&#47;&#47;image.paperplane.su&#47;$1[&#47;cce]<br />
И опять же, не забудьте исправить домен на свой. После этого все поисковики при следующей переиндексации вашего сайта поменяют пути картинок в своем индексе. Это может произойти не скоро, потому что картинок, как правило, много, но терпение и труд все перетрут.</p>
<p>На этом у меня все. Не забудьте снять страницу-заглушку установленную в самом начале, чтобы сайт снова стал доступен для ваших посетителей. Пишите свои комментарии и мнения. Может будут какие предложения по данному мануалу. Жду с нетерпением. Всем удачи!</p>

---
layout: post
status: publish
published: true
title: Замена фраз на WordPress
author:
  display_name: SlowProg
  login: seoadmin
  email: paperplanesu@rambler.ru
  url: http://paperplane.su
author_login: seoadmin
author_email: paperplanesu@rambler.ru
author_url: http://paperplane.su
wordpress_id: 59
wordpress_url: http://paperplane.su/?p=59
date: '2011-06-25 13:03:48 +0400'
date_gmt: '2011-06-25 13:03:48 +0400'
categories:
- Без плагина
tags:
- Локализация
- замена
- add_filter
comments:
- id: 35796
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2012-02-06 12:55:29 +0400'
  date_gmt: '2012-02-06 08:55:29 +0400'
  content: "Можно и так:\r\n <code>  function replace_text($text) {\r\n\t$text = str_replace('Arnold
    Schwarzenegger', '<strong>Арнольд Шварценеггер <&#47;strong>', $text);\r\n\t$text
    = str_replace('Стивен Кинг', '<a href=\"?p=445\" rel=\"nofollow\">Стивен Кинг<&#47;a>',
    $text);\r\n\treturn $text;\r\n}\r\nadd_filter('the_content', 'replace_text');<&#47;code>\r\n\r\n\r\nв
    первом случае переведёт имя на русский и выделит жирным шрифтом, во втором ссылкой
    сделает.  Но как это будет сказываться на быстродействии, если 1000-5000 таких
    замен будет?"
- id: 35797
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2012-02-06 12:56:50 +0400'
  date_gmt: '2012-02-06 08:56:50 +0400'
  content: "<code> -  не работает у вас этот тег. парсер сьел"
- id: 35811
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-02-06 14:34:52 +0400'
  date_gmt: '2012-02-06 10:34:52 +0400'
  content: Работает же =) никого не скушали. Посмотрите исходник страницы =) Просто
    со стилями я както не заморочился, надо отступы хотя бы сделать =)
- id: 35813
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-02-06 14:42:11 +0400'
  date_gmt: '2012-02-06 10:42:11 +0400'
  content: В принципе, обычно такое используется для штучной работы. А даже если замен
    много, то эта функция достаточно быстродейсвенна, чтобы обеспечить хотя бы 5000.
    У меня на локалке 5000 замен сервер совершил за ~0.008 с. Так что я думаю тут
    все нормально =)
- id: 130216
  author: Стас
  author_email: vlad-lomako@yandex.ru
  author_url: ''
  date: '2012-12-21 19:25:39 +0400'
  date_gmt: '2012-12-21 15:25:39 +0400'
  content: А как быть с пунктами меню в админке? И тем, что добавляют типы записей.
    Не получается перевести подобным образом :(
- id: 130222
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-21 20:05:23 +0400'
  date_gmt: '2012-12-21 16:05:23 +0400'
  content: "Для перевода админки придется другой код писать. Я не совсем понимаю зачем
    это делать, разве что все пункты меню по-прикольному обозвать =) Код следующий\n<code>function
    sp_translate_admin_menu () {\n\tglobal $menu;\n\treset($menu);\n\twhile (next($menu)){\n\t\tswitch
    ( $menu[key($menu)][0] ) {\n\t\t\tcase 'Munu1' :\n\t\t\t\t$menu[key($menu)][0]
    = 'Меню1';\n\t\t\t\tbreak;\n\t\t\tcase 'Menu2' :\n\t\t\t\t$menu[key($menu)][0]
    = 'Меню2';\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\nadd_action('admin_menu', 'sp_translate_admin_menu');<&#47;code>"
- id: 130227
  author: Стас
  author_email: vlad-lomako@yandex.ru
  author_url: ''
  date: '2012-12-21 20:22:50 +0400'
  date_gmt: '2012-12-21 16:22:50 +0400'
  content: "<strong>SlowProg<&#47;strong>, это работает на стандартных меню, а мне
    нужно изменить пункты меню у произвольного типа записей.."
- id: 130230
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-21 20:53:48 +0400'
  date_gmt: '2012-12-21 16:53:48 +0400'
  content: ну не знаю, поищите фильтр, который отвечает за вывод этого контента. И
    так же переведите, тем же макаром. Если такого нет, то используйте <a href="http:&#47;&#47;codex.wordpress.org&#47;Translating_WordPress"
    rel="nofollow">POT-файлы<&#47;a> для перевод. Просто сгенерируйте себе любой перевод
    всего WP и все. Там на странице внизу описано как использовать прогу Poedit.
- id: 263470
  author: "?????? ?????"
  author_email: ''
  author_url: http://51fishmm.com
  date: '2015-12-02 04:35:38 +0300'
  date_gmt: '2015-12-02 00:35:38 +0300'
  content: |-
    <strong>?????? ?????<&#47;strong>

    ??????http:&#47;&#47;veryggc.com
---
<p><a href="http:&#47;&#47;image.paperplane.su&#47;2011&#47;06&#47;wordpress_add_filter.png"><img class="alignleft size-medium wp-image-60" title="Локализация отдельных фраз на Wordpress или просто замена одного текста другим" src="http:&#47;&#47;image.paperplane.su&#47;2011&#47;06&#47;wordpress_add_filter-300x300.png" alt="Локализация отдельных фраз на Wordpress или просто замена одного текста другим" width="300" height="300" &#47;><&#47;a>Во время разработки проектов на Wordpress'e бывают моменты, что необходимо (или хочется) <strong>заменить фразы<&#47;strong> на другие, определённые вами и желательно это сделать <strong>без плагина<&#47;strong>.</p>
<p>Бывает, что хочется поменять названия каких-то пунктов в админке, бывает, что необходимо перевести одно или несколько слов на другой язык или вообще хочется поменять какой-то конкретный текст одного языка.</p>
<p>Для данной задачи в <strong>Wordpress <&#47;strong>предусмотрена специальная функция, которая бывает очень полезна в таких случаях. Эта функция называется add_filter это хук, который перехватывает текст различных типов перед добавлением его в базу данных или выводом его на экран.</p>
<p>Как видно из вышесказанного <strong>add_filter <&#47;strong>можно использовать для множества задач, но это выходит за рамки данной статьи, возможно позже я сделаю обзор по возможностям данной функции, а сейчас сосредоточимся на конкретной задаче.</p>
<p>Всё достаточно просто! Необходимо в файл&nbsp;function.php активной темы wordpress добавить кусок кода:<br />
[cce lang="php"]add_filter( 'gettext','change_text');<br />
function change_text( $translated_text ) {<br />
    if ( is_singular() ) {<br />
        switch ( $translated_text ) {<br />
            case 'says' :<br />
                $translated_text = 'сказал';<br />
                break;<br />
            case 'any' :<br />
                $translated_text = 'любой';<br />
                break;<br />
        }<br />
    }</p>
<p>return $translated_text;<br />
}[&#47;cce]<br />
Если вы не знаете как вставлять код или у вас возникли проблемы с этим, то читайте статью <a href="http:&#47;&#47;paperplane.su&#47;insert-functions-wordpress&#47;" title="Вставка кода в functions.php" target="_blank">вставка кода в functions.php<&#47;a>.</p>
<p>Вначале подвешиваем самописную свою функцию&nbsp;change_text&nbsp;на хук, и в ней уже описываем, что на что меняем. В данном коде в одиночных записях (<em>is_singular()<&#47;em>) заменяем слова "says" и "any" на "сказал" и "любой" соответственно.</p>
<p>Очень <strong>полезная <&#47;strong>штука! Бывает даже в менюшке хочется поменять название, код ворошить не всегда есть возможность или желание, а функцию накидать - раз плюнуть! И на счет смены названий пунктов меню администратора, не забудьте поменять&nbsp;<em>is_singular()<&#47;em> на<em> is_admin().<&#47;em></p>
<p>На этом все! до встречи в следующих статьях! Удачной вам монетизации!</p>

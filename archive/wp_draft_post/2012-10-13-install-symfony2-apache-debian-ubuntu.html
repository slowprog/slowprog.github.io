---
layout: post
status: publish
published: true
title: Установка Symfony2 на Apache под Debian&#47;Ubuntu
author:
  display_name: SlowProg
  login: seoadmin
  email: paperplanesu@rambler.ru
  url: http://paperplane.su
author_login: seoadmin
author_email: paperplanesu@rambler.ru
author_url: http://paperplane.su
wordpress_id: 2548
wordpress_url: http://paperplane.su/?p=2548
date: '2012-10-13 15:59:36 +0400'
date_gmt: '2012-10-13 11:59:36 +0400'
categories:
- Symfony 2
tags:
- установка
- symfony2
- debian
- ubuntu
comments:
- id: 131796
  author: Эрнест
  author_email: ernest.rahmatulin@gmail.com
  author_url: ''
  date: '2013-01-02 00:26:12 +0400'
  date_gmt: '2013-01-01 20:26:12 +0400'
  content: "Первое января с 10:00 до 23:00 я сидел за компьютером и пытался установить
    Symfony2. Облазил тучу англоязычных форумов, перечитал кучу статей, все испробовал,
    но дело так и не пошло. Случайно попал на ваш блог, скопипастил две строки:\r\napt-get
    install php5-intl\r\napt-get install php-apc\r\nи все заработало. Спасибо за чудесный
    материал по настройке сервера для Symfony2"
- id: 131799
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-01-02 00:44:07 +0400'
  date_gmt: '2013-01-01 20:44:07 +0400'
  content: Рад был помочь =) У меня 1ое прошло примерно так же =)
- id: 191604
  author: Serge
  author_email: sjcris.me@gmail.com
  author_url: ''
  date: '2013-10-24 02:58:05 +0400'
  date_gmt: '2013-10-23 22:58:05 +0400'
  content: "Здравствуйте \r\nобновил ubuntu 13.10 проверяю  app&#47;check.php \r\n**
    Mandatory requirements **\r\n\r\n OK       PHP version must be at least 5.3.3
    (5.5.3-1ubuntu2 installed)\r\n OK       PHP version must not be 5.3.16 as Symfony
    won't work properly with it\r\n OK       Vendor libraries must be installed\r\n
    OK       app&#47;cache&#47; directory must be writable\r\n OK       app&#47;logs&#47;
    directory must be writable\r\n\r\n OK       Configured default timezone \"UTC\"
    must be supported by your installation of PHP\r\n ERROR    json_encode() must
    be available\r\n          Install and enable the JSON extension.\r\n\r\nPHP 5.5.3-1ubuntu2
    (cli) (built: Oct  9 2013 14:49:24)\r\nя так понял json по дефолу уже в пхп потому
    как при танцах с бубном его собрать \r\nwarning: (near initialization for 'json_module_entry.functions')
    [enabled by default]\r\nmake: *** [json.lo] Error 1\r\nа symfony2 уперто не стартует
    \r\nАпач лог \r\n PHP Fatal error:  Call to undefined function Monolog\\\\Formatter\\\\json_encode()
    in &#47;var&#47;www&#47;symfon1&#47;app&#47;cache&#47;prod&#47;classes.php on
    line 6163\r\n\r\nне подскажите как это можно залечить ? или я что то не то делаю
    ?"
- id: 191664
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-10-24 11:58:50 +0400'
  date_gmt: '2013-10-24 07:58:50 +0400'
  content: Я вижу, что ваша ошибка похоже не касается фреймворка вообще. Подробнее
    <a href="http:&#47;&#47;habrahabr.ru&#47;post&#47;198312&#47;" title="PHP JSON
    был удален из PHP 5.5? " rel="nofollow">читайте на хабре<&#47;a>.
- id: 191802
  author: Serge
  author_email: sjcris.me@gmail.com
  author_url: ''
  date: '2013-10-25 11:48:27 +0400'
  date_gmt: '2013-10-25 07:48:27 +0400'
  content: "Спасибо за наводку на хабр . \r\nЯ пробывал ставить php-pecl-jsonc ...
    собирать его с исходников ... \r\nа оказалось нужно было просто доставить php5-json."
- id: 191805
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-10-25 11:53:33 +0400'
  date_gmt: '2013-10-25 07:53:33 +0400'
  content: Всё хорошо, что хорошо кончается =)
- id: 198682
  author: mazxcv
  author_email: mazxcv@yandex.ru
  author_url: ''
  date: '2013-11-25 17:40:39 +0400'
  date_gmt: '2013-11-25 13:40:39 +0400'
  content: Спасибо за помощь, доступно и внятно описано
---
<p><a href="http:&#47;&#47;image.paperplane.su&#47;2012&#47;10&#47;symfony2-debian.png"><img class="alignleft size-medium wp-image-2591" title="Установка Symfony2 на Apache под Debian&#47;Ubuntu" src="http:&#47;&#47;image.paperplane.su&#47;2012&#47;10&#47;symfony2-debian-300x261.png" alt="Установка Symfony2 на Apache под Debian&#47;Ubuntu" width="300" height="261" &#47;><&#47;a> Этот небольшой мануал посвящен установке Symfony 2 на сервер Apache под управлением Debian или Ubuntu. Довольно многие сегодня переходят на фреймворк Symfony2, пробуя его на вкус у себя на локальных серверах. Но рано или поздно, все берут <a title="Регистрация VPS или VDS" href="http:&#47;&#47;paperplane.su&#47;reg-vps" rel="nofollow" target="_blank">нормальный сервер типа VDS или VPS<&#47;a> и у новичков бывает возникают вопросы с установкой этого фреймворка на свой сервер.</p>
<p>Начальные условия установки Symfony 2 на сервер таковы, что у вас уже установлен Apache, PHP не ниже версии 5.3 и MySQL. А операционная система сервера Ubuntu или Debian. И директория, в которую ставится Symfony2, будет <em>&#47;var&#47;www&#47;<&#47;em>.</p>
<h2>Установка Symfony2<&#47;h2><br />
У вас есть два пути установить Symfony 2, первый для не ленивых и энергичных людей, а второй для ленивых и пассивных:</p>
<p>Вы можете скачать пакет Symfony 2 с <a title="Скачать Symfony 2" href="http:&#47;&#47;symfony.com&#47;download" rel="nofollow" target="_blank">официального сайта<&#47;a>, распоковать его и закачать на сервер вручную, например, через FTP в директорию <em>&#47;var&#47;www&#47;<&#47;em>. Но я не знаю, как вы это будете делать, потому что я сам так не поступал - я ленивый.</p>
<p>Лучший вариант установки Symfony2 - это скачать и распаковать его напрямую в директорию <em>&#47;var&#47;www&#47;<&#47;em> с помощью команды терминала <em>wget<&#47;em>:<br />
[cce lang="bash"]cd &#47;var&#47;www<br />
wget -O symfony.tgz&nbsp;http:&#47;&#47;symfony.com&#47;download?v=Symfony_Standard_Vendors_2.0.16.tgz<br />
tar xfz symfony.tgz[&#47;cce]<br />
Соответственно, по командам: заходим в директорию, скачиваем нужный пакет Симфони по ссылке и распаковываем его. Чтобы установить другой пакет нужно вставить другую ссылку. А они доступны все на том же <a title="Скачать Symfony 2" href="http:&#47;&#47;symfony.com&#47;download" rel="nofollow" target="_blank">официальном сайте<&#47;a>. Там при выборе из выпадающего списка нужного пакета под ним появляется ссылка, которую можно скопировать.</p>
<h2>Настройка сервера<&#47;h2><br />
После установки Symfony2 необходимо произвести подготовку сервера к работе. Этот фреймворк имеет определенные требования, которые необходимо исполнить. Эти требования можно поглядеть в файле проверки конфигурации сервера по адресу <em>http:&#47;&#47;your_site&#47;Symfony&#47;web&#47;config.php<&#47;em>, где <em>your_site<&#47;em> - ваш домен, который привязан к IP-адресу данного сервера. Теперь давайте установим и настроим всё, то что необходимо для полноценного функционирования фреймворка:</p>
<ul>
<li>Сперва необходимо изменить права доступа к директориям <em>cache<&#47;em> и <em>logs<&#47;em>, поскольку там будет создавать файлы сам Symfony. В самом простом случаи можно дать полные права абсолютно всем пользователям:<br />
[cce lang="bash"]chmod -R 777 app&#47;cache&#47;<br />
chmod -R 777 app&#47;logs&#47;[&#47;cce]<br />
Но данный подход не есть безопасный, если на сервере обитают еще пользователи, которым этот доступ давать не желательно и тогда вы можете поиграться с правами и дать например все права только для владельца или для группы.<br />
<&#47;li></p>
<li>Теперь нужно установить на сервер SQLite, как расширение к PHP (pdo_sqlite3). Для этого просто выполните следующую команду:<br />
[cce lang="bash"]apt-get install php5-sqlite[&#47;cce]<br />
И на всякий случай, проверьте, чтобы в файле <em>&#47;etc&#47;php5&#47;conf.d&#47;sqlite.ini<&#47;em> была строка <em>extension=sqlite.so<&#47;em>. Если не знаете, то на редактирование (просмотр) файл можно открыть с помощью редактора <em>nano<&#47;em>:<br />
[cce lang="bash"]nano &#47;etc&#47;php5&#47;conf.d&#47;sqlite.ini[&#47;cce]<br />
Чтобы выйти из редактора и сохранить изменения (или просто выйти), то необходимо нажать <em>Ctrl-X<&#47;em>. Далее вас спросят хотите ли вы сохранить сделанные изменения (если они были), отвечайте <em>Y<&#47;em>, дальше спросят в какой файл - просто нажмите <em>Enter<&#47;em> и сохранение будет произведено в этот же файл (он будет переписан).<&#47;li></p>
<li>Теперь необходимо немного отредактировать файл конфигурации PHP <em>php.ini<&#47;em>. Сперва изменим свойство <em>date.timezone<&#47;em>. Для этого открываем файл на редактирование. Адрес этого файла можно посмотреть при работе скрипта <em>config.php<&#47;em> вашего Symfony2 (надеюсь вы поняли о чем я), внизу этой страницы будет что-то типа этого: <em>* Changes to the php.ini file must be done in "&#47;etc&#47;php5&#47;apache2&#47;php.ini"<&#47;em>. Значит, открываем на редактирование этот файл:<br />
[cce lang="bash"]nano &#47;etc&#47;php5&#47;apache2&#47;php.ini[&#47;cce]<br />
и добавляем туда следующую строчку (если это вам подходит):<br />
[cce lang="bash"]date.timezone = Europe&#47;Moscow[&#47;cce]<br />
Я понимаю, что вам может не подойти эта зона, в этом случаи ищите подходящую на <a title="Временные зоны" href="http:&#47;&#47;www.php.net&#47;manual&#47;ru&#47;timezones.php" rel="nofollow" target="_blank">этой странице<&#47;a> официальной документации PHP.</p>
<p>Дальше в этом же файле меняем свойство <em>short_open_tag<&#47;em> на <em>Off<&#47;em>:<br />
[cce lang="bash"]short_open_tag = Off[&#47;cce]<br />
Всё, с файлом <em>php.ini<&#47;em> хватит. Закрывайте и сохраняйте сделанные изменения.<&#47;li></p>
<li>Далее нужно поставить расширение <em>intl&nbsp;<&#47;em>для PHP. Это очень просто выполняется следующей командой:<br />
[cce lang="bash"]apt-get install php5-intl[&#47;cce]<br />
<&#47;li></p>
<li>Теперь не мешало бы ускорить наш PHP и поставить какой-нибудь акселератор. Сами создатели Symfony2 рекомендуют устанавливать <a title="Немного информации об акселераторе Alternative PHP Cache" href="http:&#47;&#47;ru.wikipedia.org&#47;wiki&#47;Alternative_PHP_Cache#Alternative_PHP_Cache" rel="" target="_blank">APC<&#47;a>. Вот его то мы и поставим. C этим справиться следующая командой:<br />
[cce lang="bash"]apt-get install php-apc[&#47;cce]<br />
<&#47;li></p>
<li>Теперь сделаем возможным создание ЧПУ с помощью активации модуля <em>mod_rewrite<&#47;em>. Этот модуль активируется простой командой:<br />
[cce lang="bash"]a2enmod rewrite[&#47;cce]<br />
<&#47;li></p>
<li>Всё! Наш сервер настроен для полноценной работы Symfony2 на нём. И осталось только перезагрузить его:<br />
[cce lang="bash"]&#47;etc&#47;init.d&#47;apache2 restart[&#47;cce]<br />
<&#47;li><br />
<&#47;ul><br />
После прохождения всех этих пунктов вы будете иметь готовый к разработке Symfony2 со всеми необходимыми для работы дополнениями. Надеюсь у вас все получилось с первого раза. Но если возникли вопросы, предложения или замечания, то прошу писать всё в комментарии, постараюсь вам помочь. Всем удачной Симфонии!</p>

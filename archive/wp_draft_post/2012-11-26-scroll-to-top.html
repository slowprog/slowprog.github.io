---
layout: post
status: publish
published: true
title: Кнопка "Наверх"
author:
  display_name: SlowProg
  login: seoadmin
  email: paperplanesu@rambler.ru
  url: http://paperplane.su
author_login: seoadmin
author_email: paperplanesu@rambler.ru
author_url: http://paperplane.su
wordpress_id: 2691
wordpress_url: http://paperplane.su/?p=2691
date: '2012-11-26 20:43:53 +0400'
date_gmt: '2012-11-26 16:43:53 +0400'
categories:
- Без плагина
tags:
- javascrip
- наверх
- юзабилити
comments:
- id: 123346
  author: WPixel
  author_email: info@wpixel.ru
  author_url: http://wpixel.ru
  date: '2012-11-27 10:37:24 +0400'
  date_gmt: '2012-11-27 06:37:24 +0400'
  content: У меня дежавю или это принципиально что то новое? АААААААа все вьехал,
    кнопка не через функцию а через яву. Кстати как в эксплоере обстоят с этой явой?
    а то предыдущий скрол на эксплоере так и не завелся
- id: 123522
  author: Андрей
  author_email: rubtsov-gel@yandex.ru
  author_url: http://rubtsow.ru/
  date: '2012-11-27 16:18:43 +0400'
  date_gmt: '2012-11-27 12:18:43 +0400'
  content: Я предыдущий код (из статьи "Scroll to Top") давным-давно себе поставил,
    настроил, всё нормально работает. Во всех браузерах. Он хоть и немного тяжеловесный,
    зато не нужно шарить по всему коду, искать функции что за что отвечает. За что,
    собственно, и спасибо автору.
- id: 123524
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-11-27 16:21:15 +0400'
  date_gmt: '2012-11-27 12:21:15 +0400'
  content: Спасибо же огромное =) А этот мануал я написал для идеалистов =) Я сам
    так же через функцию вывожу в хедер весь этот код и не парюсь на счет подключения
    файлов xDDD Ленивый я.
- id: 123537
  author: Андрей
  author_email: rubtsov-gel@yandex.ru
  author_url: http://rubtsow.ru
  date: '2012-11-27 16:50:41 +0400'
  date_gmt: '2012-11-27 12:50:41 +0400'
  content: 'Аналогия: ковыряются в носу обычно пальцем. На руке. Но ведь по идее можно
    же ковыряться в носу и пальцем на ноге. :) Так вот вывод кода через яву, а не
    через пхп напоминает ковыряние в носу пальцем ноги - вполне реализуемо, но как-то
    не очень удобно. :-D'
- id: 123557
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-11-27 17:29:02 +0400'
  date_gmt: '2012-11-27 13:29:02 +0400'
  content: Ахахахаха! Аналогия чересчур жесткая. Все же выводить через функцию гораздо
    легче чем ковырять в носу пальцем ноги. Фактически мои пальцы в нос не залезут
    xDDDD
- id: 123570
  author: Андрей
  author_email: rubtsov-gel@yandex.ru
  author_url: http://rubtsow.ru/
  date: '2012-11-27 17:42:37 +0400'
  date_gmt: '2012-11-27 13:42:37 +0400'
  content: 'Нормальная аналогия, не жесткая. :cool: Это я ещё смягчил. Можно же было
    в пример привести совсем не нос. И не палец. :mrgreen:'
- id: 132991
  author: Леонид
  author_email: slvleo@gmail.com
  author_url: http://vsevocrug.ru/
  date: '2013-01-11 18:43:03 +0400'
  date_gmt: '2013-01-11 14:43:03 +0400'
  content: Спасибо большое!!! Все сделал за 5 минут, все работает отлично.
- id: 132992
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-01-11 18:46:17 +0400'
  date_gmt: '2013-01-11 14:46:17 +0400'
  content: Рад был помочь =))))) У меня еще есть и другие <em>без плагины<&#47;em>
    =))) Плюс еще на подходе парочка =)
- id: 142503
  author: Любовь
  author_email: makarenko-lubov@mail.ru
  author_url: http://assorti-recepti.ru
  date: '2013-03-28 21:04:55 +0400'
  date_gmt: '2013-03-28 17:04:55 +0400'
  content: А я ниче не поняла, сама сделать пока не смогу, пойду пока поставлю с помощью
    плагина. Но я еще вернусь ...  :-)
- id: 142517
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-03-28 23:00:46 +0400'
  date_gmt: '2013-03-28 19:00:46 +0400'
  content: Нет нет нет!!! Не надь плагина! Просто внимательней статью читать! В самом
    начале сказано на основе чего написана эта статья. Там есть ссылочка, по ней перейдите
    и там будет функция для functions.php, которую вставите и у вас появится скролл
    ту топ =)))
- id: 142518
  author: Любовь
  author_email: makarenko-lubov@mail.ru
  author_url: http://assorti-recepti.ru
  date: '2013-03-28 23:16:15 +0400'
  date_gmt: '2013-03-28 19:16:15 +0400'
  content: Да, наверное я чего то не поняла, не надо было на больную голову. Статью
    написала, хватит на сегодня. Завтра разберусь и сделаю как вы сказали. СПАСИБО!
- id: 162113
  author: Сергей
  author_email: steken@mail.ru
  author_url: ''
  date: '2013-05-27 16:53:12 +0400'
  date_gmt: '2013-05-27 12:53:12 +0400'
  content: "У меня не получается. Копирую код в файл .js сохраняю его, заливаю в папку
    с темой. Затем подключаю в header.php и не каких реакции. \nЕсли через functions.php
    то все работает, но только в hrome. Может какая проблема с подключением jquery???\n\nАвтор
    прошу помоги разобраться...)"
- id: 162130
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-05-27 18:53:25 +0400'
  date_gmt: '2013-05-27 14:53:25 +0400'
  content: |-
    Было бы круто если бы вы показали страницу где пытаетесь подключить. Я бы поглядел на наличии возможных ошибок.

    Но вообще, проверьте точно ли подключается jQuery, и что оно подключается раньше кнопки.
- id: 202891
  author: Руслан
  author_email: otherstyle@mail.ru
  author_url: http://progress-reklama.ru/easyweb/
  date: '2013-12-01 00:55:24 +0400'
  date_gmt: '2013-11-30 20:55:24 +0400'
  content: Здравствуйте. У меня такая же проблема, как и у Сергея. Скопировал ваш
    код в top.js и подключил его в index.php через  после jQuery, но никакого эффекта.
    Сайт - http:&#47;&#47;progress-reklama.ru&#47;easyweb&#47;. Не вордпресс, просто
    лэндинг на php. Подскажите, как действовать дальше. Очень хотел кнопку как в контакте,
    как раз у вас нашел, и не работает. Только раздразнили меня)
- id: 202903
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-12-01 01:22:32 +0400'
  date_gmt: '2013-11-30 21:22:32 +0400'
  content: У вас мой код не подключен. По адресу <em>http:&#47;&#47;progress-reklama.ru&#47;js&#47;top.js<&#47;em>
    выскакивает ошибка 404. Будьте внимательней. Не верно подключили или даже может
    файл и не создали. В общем, думайте.
- id: 202913
  author: Руслан
  author_email: otherstyle@mail.ru
  author_url: http://progress-reklama.ru/easyweb/
  date: '2013-12-01 01:34:05 +0400'
  date_gmt: '2013-11-30 21:34:05 +0400'
  content: Так он по адресу http:&#47;&#47;progress-reklama.ru&#47;easyweb&#47;js&#47;top.js.
    Корень - это http:&#47;&#47;progress-reklama.ru&#47;easyweb.
- id: 202944
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-12-01 02:27:22 +0400'
  date_gmt: '2013-11-30 22:27:22 +0400'
  content: |-
    Я и говорю, что не верно подключили. Загляните в исходник страницы в браузере, там написано следующее:
    <code><script type="text&#47;javascript" src="&#47;js&#47;top.js"><&#47;script><&#47;code>
    что значит что браузер пытается его вытянуть по адресу <em>http:&#47;&#47;progress-reklama.ru&#47;js&#47;top.js<&#47;em>. Вопросы?
- id: 202956
  author: Руслан
  author_email: otherstyle@mail.ru
  author_url: http://progress-reklama.ru/easyweb/
  date: '2013-12-01 02:49:17 +0400'
  date_gmt: '2013-11-30 22:49:17 +0400'
  content: 'Да нет, основной домен тут не при чем. Он понимает как корень папку, где
    находится index и все подпапки. Точно также он подключает jquery к примеру: .
    Папка fancybox лежит по адресу http:&#47;&#47;progress-reklama.ru&#47;easyweb&#47;fancybox.
    Просто сделан сайт на html-верстальщике и залит в дочернюю папку другого сайта.
    И все прекрасно работает. Например, точно также подключается счетчик-таймер на
    странице . И он, как видите, работает. Вопрос в том: нуждался ли ваш код в редактировании,
    прежде чем вставлять его в .js и подключать?'
- id: 202958
  author: Руслан
  author_email: otherstyle@mail.ru
  author_url: http://progress-reklama.ru/easyweb/
  date: '2013-12-01 02:52:50 +0400'
  date_gmt: '2013-11-30 22:52:50 +0400'
  content: Блин, коды почему-то исчезли в комменте выше. После "к примеру" - <code><script
    type="text&#47;javascript" src="fancybox&#47;jquery.fancybox-1.3.0.pack.js"><&#47;script><&#47;code>
    После "счетчик-таймер на странице" - <code><script type="text&#47;javascript"
    src=".&#47;js&#47;6e3e31d96d4e09e092b3be41197f9ba5.js"><&#47;script><&#47;code>
- id: 203249
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-12-01 11:40:08 +0400'
  date_gmt: '2013-12-01 07:40:08 +0400'
  content: |-
    >_< Похоже вы не понимаете, что тут происходит. Предыдущий мой комментарий всё ещё актуален. Откройте HTML-код страницы и поглядите откуда браузер тянет этот файл. И он его просто не может найти. Вы проверьте. Мышкой тыкните. Тут мой код не причём. Он даже не подгружается. Вся проблема в том что вы его неверно подключили.

    Далее. Если вам не достаточно намёка на правильность подключения. То прошу обратить внимание на абсолютные (&#47;js&#47;top.js) и относительные (js&#47;top.js) пути. Чувствуете разницу? Если не понятно, то читайте <a href="http:&#47;&#47;htmlbook.ru&#47;samhtml&#47;ssylki&#47;absolyutnye-i-otnositelnye-ssylki" rel="nofollow">мат. часть<&#47;a>.
- id: 203453
  author: Руслан
  author_email: otherstyle@mail.ru
  author_url: ''
  date: '2013-12-01 17:37:33 +0400'
  date_gmt: '2013-12-01 13:37:33 +0400'
  content: "Да, спасибо, теперь понял о чем вы. Подключил следующим способом:\r\n<code><script
    type=\"text&#47;javascript\" src=\"http:&#47;&#47;progress-reklama.ru&#47;easyweb&#47;js&#47;top.js\"><&#47;script><&#47;code>\r\nНо,
    вот незадача, никаких изменений. Может я еще какой-то шаг пропустил с самого начала?"
- id: 203457
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-12-01 17:45:23 +0400'
  date_gmt: '2013-12-01 13:45:23 +0400'
  content: "А вот это уже мой косяк. Почему то не хватает кавычки в одном месте. 3я
    строка должна быть вот такой:\r\n\r\n<code>controlHTML: \"<img src=\\\"http:&#47;&#47;mysite.ru&#47;wp-content&#47;themes&#47;mytheme&#47;images&#47;up.png\\\"
    style=\\\"position: absolute; bottom: 0; left: 0;margin:5px 10px;\\\" &#47;>\",<&#47;code>\r\n\r\nтам
    в самом начале не хватало кавычки. в статье я уже исправил. я конечно сейчас не
    проверял, но вроде бы должно запуститься."
- id: 203471
  author: Руслан
  author_email: otherstyle@mail.ru
  author_url: ''
  date: '2013-12-01 18:21:29 +0400'
  date_gmt: '2013-12-01 14:21:29 +0400'
  content: Теперь все работает идеально! Спасибо, что отозвались на просьбу о помощи)
- id: 220404
  author: Павел
  author_email: StepinPV@yandex.ru
  author_url: ''
  date: '2014-01-25 22:11:20 +0400'
  date_gmt: '2014-01-25 18:11:20 +0400'
  content: "Объясните, пожалуйста, что не так подключаю? \r\nЗдесь ваш пример, за
    исключением того, что картинку я заменил текстом.\r\n\r\n\tName\r\n\t\r\n\t\r\n\t\r\n\t
    \   var scrolltotop={\r\n        setting: {startline: 350, scrollto: 0, scrollduration:
    800, fadeduration:[500, 100]},\r\n        controlHTML: '^ Наверх',\r\n        anchorkeyword:
    \"#top\",\r\n\r\n        state: {isvisible:false, shouldvisible:false},\r\n\r\n
    \       scrollup:function(){\r\n            if (!this.cssfixedsupport) {\r\n                this.control.css({opacity:0})
    &#47;&#47;hide control immediately after clicking it\r\n            }\r\n            var
    dest=isNaN(this.setting.scrollto)? this.setting.scrollto : parseInt(this.setting.scrollto);\r\n
    \           if (typeof dest==\"string\" &amp;&amp; jQuery(\"#\"+dest).length==1)\r\n
    \               dest=jQuery(\"#\"+dest).offset().top;\r\n            else\r\n
    \               dest=0;\r\n            this.body.animate({scrollTop: dest}, this.setting.scrollduration);\r\n
    \       },\r\n            keepfixed:function(){\r\n            var window=jQuery(window);\r\n
    \           var controlx=window.scrollLeft() + window.width() - this.control.width();\r\n
    \           var controly=window.scrollTop() + window.height() - this.control.height();\r\n
    \           this.control.css({left:controlx+\"px\", top:controly+\"px\"})\r\n
    \       },\r\n            togglecontrol:function(){\r\n            var scrolltop=jQuery(window).scrollTop();\r\n
    \           if (!this.cssfixedsupport)\r\n                this.keepfixed();\r\n
    \           this.state.shouldvisible=(scrolltop>=this.setting.startline)? true
    : false;\r\n            if (this.state.shouldvisible &amp;&amp; !this.state.isvisible){\r\n
    \               this.control.stop().animate({opacity:1}, this.setting.fadeduration[0]).css(\"visibility\",
    \"visible\");\r\n                this.state.isvisible=true;\r\n            }\r\n
    \           else if (this.state.shouldvisible==false &amp;&amp; this.state.isvisible){\r\n
    \               this.control.stop().animate({opacity:0}, this.setting.fadeduration[1],
    function(){\r\n                    $(this).css(\"visibility\", \"hidden\");\r\n
    \               });\r\n                this.state.isvisible=false;\r\n            }\r\n
    \       },\r\n\r\n        init:function(){\r\n            jQuery(document).ready(function($){\r\n
    \               var mainobj=scrolltotop;\r\n                var iebrws=document.all;\r\n
    \               mainobj.cssfixedsupport=!iebrws || iebrws &amp;&amp; document.compatMode==\"CSS1Compat\"
    &amp;&amp; window.XMLHttpRequest;\r\n                mainobj.body = (window.opera)?
    (document.compatMode==\"CSS1Compat\"? $(\"html\") : $(\"body\")) : $(\"html,body\");\r\n
    \               mainobj.control=$(mainobj.controlHTML);\r\n                mainobj.control\r\n
    \                   .css({position:mainobj.cssfixedsupport? \"fixed\" : \"absolute\",
    bottom:0, left:0, opacity:0, cursor:\"pointer\"})\r\n                    .attr({title:\"Наверх\"})\r\n
    \                   .click(function(){mainobj.scrollup(); return false})\r\n                    .appendTo(\"body\");\r\n
    \               if (document.all &amp;&amp; !window.XMLHttpRequest &amp;&amp;
    mainobj.control.text()!=\"\")\r\n                    mainobj.control.css({width:mainobj.control.width()});\r\n
    \               mainobj.togglecontrol();\r\n                $(\"a[href=\\\"\"
    + mainobj.anchorkeyword +\"\\\"]\").click(function(){\r\n                    mainobj.scrollup();\r\n
    \                   return false;\r\n                });\r\n                $(window).bind(\"scroll
    resize\", function(e){\r\n                    mainobj.togglecontrol();\r\n                });\r\n
    \           });\r\n        }\r\n\t\t};\r\n\t\tscrolltotop.init();\r\n\t\r\n"
- id: 220405
  author: Павел
  author_email: StepinPV@yandex.ru
  author_url: ''
  date: '2014-01-25 22:13:20 +0400'
  date_gmt: '2014-01-25 18:13:20 +0400'
  content: "Так правильнее. \r\n<!--\r\n\tName\r\n\t\r\n\t\r\n\t<!---->\r\n\t\r\n\t
    \   var scrolltotop={\r\n        setting: {startline: 350, scrollto: 0, scrollduration:
    800, fadeduration:[500, 100]},\r\n        controlHTML: '^ Наверх',\r\n        anchorkeyword:
    \"#top\",\r\n\r\n        state: {isvisible:false, shouldvisible:false},\r\n\r\n
    \       scrollup:function(){\r\n            if (!this.cssfixedsupport) {\r\n                this.control.css({opacity:0})
    &#47;&#47;hide control immediately after clicking it\r\n            }\r\n            var
    dest=isNaN(this.setting.scrollto)? this.setting.scrollto : parseInt(this.setting.scrollto);\r\n
    \           if (typeof dest==\"string\" &amp;&amp; jQuery(\"#\"+dest).length==1)\r\n
    \               dest=jQuery(\"#\"+dest).offset().top;\r\n            else\r\n
    \               dest=0;\r\n            this.body.animate({scrollTop: dest}, this.setting.scrollduration);\r\n
    \       },\r\n            keepfixed:function(){\r\n            var window=jQuery(window);\r\n
    \           var controlx=window.scrollLeft() + window.width() - this.control.width();\r\n
    \           var controly=window.scrollTop() + window.height() - this.control.height();\r\n
    \           this.control.css({left:controlx+\"px\", top:controly+\"px\"})\r\n
    \       },\r\n            togglecontrol:function(){\r\n            var scrolltop=jQuery(window).scrollTop();\r\n
    \           if (!this.cssfixedsupport)\r\n                this.keepfixed();\r\n
    \           this.state.shouldvisible=(scrolltop>=this.setting.startline)? true
    : false;\r\n            if (this.state.shouldvisible &amp;&amp; !this.state.isvisible){\r\n
    \               this.control.stop().animate({opacity:1}, this.setting.fadeduration[0]).css(\"visibility\",
    \"visible\");\r\n                this.state.isvisible=true;\r\n            }\r\n
    \           else if (this.state.shouldvisible==false &amp;&amp; this.state.isvisible){\r\n
    \               this.control.stop().animate({opacity:0}, this.setting.fadeduration[1],
    function(){\r\n                    $(this).css(\"visibility\", \"hidden\");\r\n
    \               });\r\n                this.state.isvisible=false;\r\n            }\r\n
    \       },\r\n\r\n        init:function(){\r\n            jQuery(document).ready(function($){\r\n
    \               var mainobj=scrolltotop;\r\n                var iebrws=document.all;\r\n
    \               mainobj.cssfixedsupport=!iebrws || iebrws &amp;&amp; document.compatMode==\"CSS1Compat\"
    &amp;&amp; window.XMLHttpRequest;\r\n                mainobj.body = (window.opera)?
    (document.compatMode==\"CSS1Compat\"? $(\"html\") : $(\"body\")) : $(\"html,body\");\r\n
    \               mainobj.control=$(mainobj.controlHTML);\r\n                mainobj.control\r\n
    \                   .css({position:mainobj.cssfixedsupport? \"fixed\" : \"absolute\",
    bottom:0, left:0, opacity:0, cursor:\"pointer\"})\r\n                    .attr({title:\"Наверх\"})\r\n
    \                   .click(function(){mainobj.scrollup(); return false})\r\n                    .appendTo(\"body\");\r\n
    \               if (document.all &amp;&amp; !window.XMLHttpRequest &amp;&amp;
    mainobj.control.text()!=\"\")\r\n                    mainobj.control.css({width:mainobj.control.width()});\r\n
    \               mainobj.togglecontrol();\r\n                $(\"a[href=\\\"\"
    + mainobj.anchorkeyword +\"\\\"]\").click(function(){\r\n                    mainobj.scrollup();\r\n
    \                   return false;\r\n                });\r\n                $(window).bind(\"scroll
    resize\", function(e){\r\n                    mainobj.togglecontrol();\r\n                });\r\n
    \           });\r\n        }\r\n\t\t};\r\n\t\tscrolltotop.init();\r\n\t\r\n-->"
- id: 220407
  author: Павел
  author_email: StepinPV@yandex.ru
  author_url: ''
  date: '2014-01-25 22:14:13 +0400'
  date_gmt: '2014-01-25 18:14:13 +0400'
  content: Как вам вообще лучше код показать?) Он не вставляется здесь из-за тегов)
- id: 220572
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-01-26 17:38:26 +0400'
  date_gmt: '2014-01-26 13:38:26 +0400'
  content: "Вы отлаживали свой код в панели браузера? Что за комменты в начале и в
    конце? JS такой тип коммента не понимает. Он думает что Name в начале &ndash;
    это что-то про него. А controlHTML должен быть HTML тегом. Потому ваш код должен
    быть примерно следующим:\n<code>\nvar scrolltotop={\n\tsetting: {startline: 350,
    scrollto: 0, scrollduration: 800, fadeduration:[500, 100]},\n\tcontrolHTML: '<span>^
    Наверх<&#47;span>',\n\tanchorkeyword: \"#top\",\n\t\n\tstate: {isvisible:false,
    shouldvisible:false},\n\t\n\tscrollup:function(){\n\t\tif (!this.cssfixedsupport)
    {\n\t\t\tthis.control.css({opacity:0}) &#47;&#47;hide control immediately after
    clicking it\n\t\t}\n\t\tvar dest=isNaN(this.setting.scrollto)? this.setting.scrollto
    : parseInt(this.setting.scrollto);\n\t\tif (typeof dest==\"string\" && jQuery(\"#\"+dest).length==1)\n\t\t\tdest=jQuery(\"#\"+dest).offset().top;\n\t\telse\n\t\t\tdest=0;\n\t\tthis.body.animate({scrollTop:
    dest}, this.setting.scrollduration);\n\t},\n\tkeepfixed:function(){\n\t\tvar window=jQuery(window);\n\t\tvar
    controlx=window.scrollLeft() + window.width() - this.control.width();\n\t\tvar
    controly=window.scrollTop() + window.height() - this.control.height();\n\t\tthis.control.css({left:controlx+\"px\",
    top:controly+\"px\"})\n\t},\n\ttogglecontrol:function(){\n\t\tvar scrolltop=jQuery(window).scrollTop();\n\t\tif
    (!this.cssfixedsupport)\n\t\t\tthis.keepfixed();\n\t\tthis.state.shouldvisible=(scrolltop>=this.setting.startline)?
    true : false;\n\t\tif (this.state.shouldvisible && !this.state.isvisible){\n\t\t\tthis.control.stop().animate({opacity:1},
    this.setting.fadeduration[0]).css(\"visibility\", \"visible\");\n\t\t\tthis.state.isvisible=true;\n\t\t}\n\t\telse
    if (this.state.shouldvisible==false && this.state.isvisible){\n\t\t\tthis.control.stop().animate({opacity:0},
    this.setting.fadeduration[1], function(){\n\t\t\t\t$(this).css(\"visibility\",
    \"hidden\");\n\t\t\t});\n\t\t\tthis.state.isvisible=false;\n\t\t}\n\t},\n\t\n\tinit:function(){\n\t\tjQuery(document).ready(function($){\n\t\t\tvar
    mainobj=scrolltotop;\n\t\t\tvar iebrws=document.all;\n\t\t\tmainobj.cssfixedsupport=!iebrws
    || iebrws && document.compatMode==\"CSS1Compat\" && window.XMLHttpRequest;\n\t\t\tmainobj.body
    = (window.opera)? (document.compatMode==\"CSS1Compat\"? $(\"html\") : $(\"body\"))
    : $(\"html,body\");\n\t\t\tmainobj.control=$(mainobj.controlHTML);\n\t\t\tmainobj.control\n\t\t\t\t.css({position:mainobj.cssfixedsupport?
    \"fixed\" : \"absolute\", bottom:0, left:0, opacity:0, cursor:\"pointer\"})\n\t\t\t\t.attr({title:\"Наверх\"})\n\t\t\t\t.click(function(){mainobj.scrollup();
    return false})\n\t\t\t\t.appendTo(\"body\");\n\t\t\t\n\t\t\tif (document.all &&
    !window.XMLHttpRequest && mainobj.control.text()!=\"\")\n\t\t\t\tmainobj.control.css({width:mainobj.control.width()});\n\t\t\tmainobj.togglecontrol();\n\t\t\t$(\"a[href=\\\"\"
    + mainobj.anchorkeyword +\"\\\"]\").click(function(){\n\t\t\t\tmainobj.scrollup();\n\t\t\t\treturn
    false;\n\t\t\t});\n\t\t\t$(window).bind(\"scroll resize\", function(e){\n\t\t\t\tmainobj.togglecontrol();\n\t\t\t});\n\t\t});\n\t}\n};\nscrolltotop.init();\n<&#47;code>\n\nИ
    заметьте, что мой код отличается от остального коммента т.к. я использовал очевидный
    тег code что расположен в панели сверху поля комментирования. В следующий так
    же используйте его =)"
- id: 223637
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.astrakraft.ru/
  date: '2014-02-09 19:53:40 +0400'
  date_gmt: '2014-02-09 15:53:40 +0400'
  content: 'Добрый день. На одном сайте встретила двойную стрелку: вверх и вниз. Мне
    показалось это очень удобным. Не подскажите, как можно внедрить в данный код позицию
    вниз. Ведь иногда нужно бывает быстро спуститься вниз, в комментарии. Спасибо.'
- id: 223647
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-02-09 21:43:55 +0400'
  date_gmt: '2014-02-09 17:43:55 +0400'
  content: Внедрить не получиться, получиться только, если полностью всё переписать,
    а это уже не внедрение. Сейчас я точно этим заниматься не буду, но могу на очередь
    поставить для новой статьи, правда я не слишком интенсивно пишу, но постараюсь.
- id: 223793
  author: Светлана
  author_email: mir_rebenka@inbox.ru
  author_url: http://ncuxolog.astrakraft.ru/
  date: '2014-02-10 09:51:11 +0400'
  date_gmt: '2014-02-10 05:51:11 +0400'
  content: Спасибо.
---
<p><a href="http:&#47;&#47;image.paperplane.su&#47;2012&#47;11&#47;scroll-to-top-js.png"><img src="http:&#47;&#47;image.paperplane.su&#47;2012&#47;11&#47;scroll-to-top-js-300x300.png" alt="Кнопка Наверх" title="Кнопка Наверх" width="300" height="300" class="alignleft size-medium wp-image-2694" &#47;><&#47;a>Сегодня мы делаем <strong>кнопку <em>Наверх<&#47;em><&#47;strong>, которая перематывает страницу сайта на начало. Статья эта подойдет для любой CMS или даже сайта написанном на голом HTML. Тут важно чтобы JavaScript был включен у пользователя, но это от вас не зависит, так что не парьтесь. Кстати, не мало важно, что кнопка сделана с закосом под аналогичную кнопку из ВКонтакта. У всех на это своё мнение, кому-то она и не нравится, но всё же я сделал так.</p>
<p>Немного предыстории поста. Он был инициирован по злобным и коварным просьбам недовольных читателей из статьи <a href="http:&#47;&#47;paperplane.su&#47;scroll-to-top-bez-plagina-dlya-wordpress&#47;" title="Scroll to top без плагина для WordPress" target="_blank">Scroll to top без плагина для WordPress<&#47;a>, которые думают, что я зазнавшийся гик, не желающий разъяснять тонкости web-разработок и делится своими знаниями. Ну да, это правда! Но сегодня я снизошёл с Олимпа своей гордыни и решил помочь <em>обычным<&#47;em> людям обрести Знание!</p>
<p>Как следует из просьбы <em>обычного<&#47;em> человека из ранее указанной статьи, требуется разъяснить, каким образом реорганизовать код, чтобы сделать его подключаемым через JS-файл в заголовке страницы, а то пихать <em>как есть<&#47;em> таких размеров JS-код в заголовок не есть хорошая практика. Что же, я согласен, есть резон запихать его в отдельный файл. Тем более, ничего сложного в этом нет. Берем готовый JS-код из функции, заменяем все PHP-переменные из код на их значения, пихаем его в отдельный файл, который можно залить в любое место, и подключаем в заголовке страницы (или точнее всех страниц). Повторюсь, что данные действия могут быть проделаны для любой CMS или самописного движка, но в качестве примера я буду демонстрировать эти действия над WordPress.</p>
<h2>Формирование кода<&#47;h2><br />
Код функции я приводить не буду, он есть в статье по ссылке выше. Будем думать она у вас открыта в соседней вкладке, для наглядности. В начале функции прописаны переменные, которые служат настройками для кнопки. Предположим вы уже знаете какие настройки примените к своей кнопке, и предположим они следующие:<br />
[cce lang="php"]<br />
$speed = 800;<br />
$at = 350;<br />
$image = 'http:&#47;&#47;mysite.ru&#47;wp-content&#47;themes&#47;mytheme&#47;images&#47;up.png';<br />
$colorFont = '#999999';<br />
$hAlign = 'left';<br />
$vAlign = 'bottom';<br />
$color = '#373737';<br />
$width = '10';<br />
$margin = 5;<br />
$visible = true;<br />
$widthContent = 1000;<br />
[&#47;cce]<br />
Теперь значения этих переменные нужно раскидать по JS-коду в те места, где они <a rel="nofollow" href="http:&#47;&#47;ru.wikipedia.org&#47;wiki&#47;%D0%9A%D0%BE%D0%BD%D0%BA%D0%B0%D1%82%D0%B5%D0%BD%D0%B0%D1%86%D0%B8%D1%8F" title="Операция конкатенации строк" target="_blank">конкатенировались<&#47;a> т.е. присоединялись. Притом я обращаю ваше внимание, что вам нужен только JS-код (не захватите CSS-стили, их потом отдельно), находящийся между тегами [cci lang="html"]<script>...<&#47;script>[&#47;cci]. Ну надеюсь вы сами разберетесь куда эти переменные втыкать, благо, всё понятно и по коду видно. Главное не забудьте заменить переменную вместе с окружающими операторами конкатенации (точками) и апострофами и некоторые переменные встречаются не один раз. Я приведу конечный результат (комментарии некоторых замен под кодом):<br />
[cce lang="js"]<br />
    var scrolltotop={<br />
        setting: {startline: 350, scrollto: 0, scrollduration: 800, fadeduration:[500, 100]},<br />
        controlHTML: "<img src=\"http:&#47;&#47;mysite.ru&#47;wp-content&#47;themes&#47;mytheme&#47;images&#47;up.png\" style=\"position: absolute; bottom: 0; left: 0;margin:5px 10px;\" &#47;>",<br />
        anchorkeyword: "#top",</p>
<p>        state: {isvisible:false, shouldvisible:false},</p>
<p>        scrollup:function(){<br />
            if (!this.cssfixedsupport) {<br />
                this.control.css({opacity:0}) &#47;&#47;hide control immediately after clicking it<br />
            }<br />
            var dest=isNaN(this.setting.scrollto)? this.setting.scrollto : parseInt(this.setting.scrollto);<br />
            if (typeof dest=="string" && jQuery("#"+dest).length==1)<br />
                dest=jQuery("#"+dest).offset().top;<br />
            else<br />
                dest=0;<br />
            this.body.animate({scrollTop: dest}, this.setting.scrollduration);<br />
        },<br />
            keepfixed:function(){<br />
            var window=jQuery(window);<br />
            var controlx=window.scrollLeft() + window.width() - this.control.width();<br />
            var controly=window.scrollTop() + window.height() - this.control.height();<br />
            this.control.css({left:controlx+"px", top:controly+"px"})<br />
        },<br />
            togglecontrol:function(){<br />
            var scrolltop=jQuery(window).scrollTop();<br />
            if (!this.cssfixedsupport)<br />
                this.keepfixed();<br />
            this.state.shouldvisible=(scrolltop>=this.setting.startline)? true : false;<br />
            if (this.state.shouldvisible && !this.state.isvisible){<br />
                this.control.stop().animate({opacity:1}, this.setting.fadeduration[0]).css("visibility", "visible");<br />
                this.state.isvisible=true;<br />
            }<br />
            else if (this.state.shouldvisible==false && this.state.isvisible){<br />
                this.control.stop().animate({opacity:0}, this.setting.fadeduration[1], function(){<br />
                    $(this).css("visibility", "hidden");<br />
                });<br />
                this.state.isvisible=false;<br />
            }<br />
        },</p>
<p>        init:function(){<br />
            jQuery(document).ready(function($){<br />
                var mainobj=scrolltotop;<br />
                var iebrws=document.all;<br />
                mainobj.cssfixedsupport=!iebrws || iebrws && document.compatMode=="CSS1Compat" && window.XMLHttpRequest;<br />
                mainobj.body = (window.opera)? (document.compatMode=="CSS1Compat"? $("html") : $("body")) : $("html,body");<br />
                if ($(document).width() - (($(document).width() * (10 &#47; 100)) * 2) > 1000) {<br />
                        mainobj.control=$("
<div id=\"topcontrol\" style=\"height: 100%;width: 10%;\">"+mainobj.controlHTML+"<&#47;div>");<br />
                    } else {<br />
                        mainobj.control=$(mainobj.controlHTML); }<br />
                mainobj.control<br />
                    .css({position:mainobj.cssfixedsupport? "fixed" : "absolute", bottom:0, left:0, opacity:0, cursor:"pointer"})<br />
                    .attr({title:"Наверх"})<br />
                    .click(function(){mainobj.scrollup(); return false})<br />
                    .appendTo("body");<br />
                if (document.all && !window.XMLHttpRequest && mainobj.control.text()!="")<br />
                    mainobj.control.css({width:mainobj.control.width()});<br />
                mainobj.togglecontrol();<br />
                $("a[href=\"" + mainobj.anchorkeyword +"\"]").click(function(){<br />
                    mainobj.scrollup();<br />
                    return false;<br />
                });<br />
                $(window).bind("scroll resize", function(e){<br />
                    mainobj.togglecontrol();<br />
                });<br />
            });<br />
        }<br />
    };<br />
    scrolltotop.init()<br />
[&#47;cce]<br />
Большинство замен довольно просты, но парочка может вызвать вопросы у новичка:</p>
<ul>
<li>Замена содержимого JS-переменной <em>controlHTML<&#47;em>. Для выбора способа вывода надписи (картинкой или текстом) использован PHP-оператор <em>if<&#47;em>, только сокращенный, который выглядит примерно так [cci lang="php"]<условие>?<код_если_условие_истинно>:<код_если_условие_ложно>[&#47;cci]. В данном случаи код может быть разбит следующим образом<br />
[cce lang="js"]<br />
$image?<br />
	'<img src=\"'.$image.'\" style=\"position: absolute;'.$vAlign.': 0;'.$hAlign.': 0;margin:'.$margin.'px 10px;\" &#47;>'<br />
:<br />
	'<span style=\"position: absolute;'.$vAlign.': 0;'.$hAlign.': 0;margin:'.$margin.'px 10px;font-size: 16px;color: '.$colorFont.';\">▲ Наверх<&#47;span>'<br />
[&#47;cce]<br />
Всё просто. Если в переменной <em>$image<&#47;em> есть хоть что-нибудь, то выводим картинку (по адресу из этой переменной), иначе выводим текст. Вот вы и выбираете, что оставить, картинку или текст. Само условие и одну из веток ветвления (противоположную от выбранной) удаляете. В коде я выбрал картинку, для примера.<&#47;li></p>
<li>Следующий момент связан с тем же условным оператором, но уже в другом месте:<br />
[cce lang="js"]<br />
((!$visible)?<br />
	'mainobj.control=$(mainobj.controlHTML);'<br />
:<br />
	'if ($(document).width() - (($(document).width() * ('.$width.'&#47; 100)) * 2) > '.$widthContent.') {<br />
		mainobj.control=$("
<div id=\"topcontrol\" style=\"height: 100%;width: '.$width.'%;\">"+mainobj.controlHTML+"<&#47;div>");<br />
	} else {<br />
		mainobj.control=$(mainobj.controlHTML); }'<br />
)<br />
[&#47;cce]<br />
Переменная <em>$visible<&#47;em> отвечает за отображение подсвечивающегося блока. Если он вам не нужен, то выберете первое ветвление [cci lang="js"]mainobj.control=$(mainobj.controlHTML)[&#47;cci], если нужен, то оставить только второе ветвление. Условие так же удаляется.<&#47;li><br />
<&#47;ul><br />
Остальные переменные заменяются обычным методом поиска и вставки. Далее этот код кидаете в файл, например, <em>sp_scroll_to_top.js<&#47;em> и заливаете его к себе в активную тему на сервере. Допустим, что вы залили этот файл по адресу <em>http:&#47;&#47;mysite.ru&#47;wp-content&#47;themes&#47;mytheme&#47;js&#47;sp_scroll_to_top.js<&#47;em>. Тогда для того чтобы подключить этот файл необходимо в заголовке темы (файл <em>header.php<&#47;em>) между тегами [cci lang="html"]<head>...<&#47;head>[&#47;cci] прописать следующее<br />
[cce lang="html"]<br />
<script type="text&#47;javascript" src="http:&#47;&#47;mysite.ru&#47;wp-content&#47;themes&#47;mytheme&#47;js&#47;sp_scroll_to_top.js"><&#47;script><br />
[&#47;cce]<br />
Теперь ваш <strong>Scroll To Top<&#47;strong> уже должен работать, но остался один нюанс.</p>
<p>Если вы используете подсвечивающийся блок, то вам нужно взять CSS-стиль между тегами [cci lang="html"]<br />
<style>...<&#47;style>[&#47;cci], который отвечает за цвет фона этого блока, и заменить там переменную <em>$color<&#47;em>. Получившийся код необходимо добавить в ваш файл со стилями <em>style.css<&#47;em>, который находится в папке с активным шаблоном. В моем случаи получится так:<br />
[cce lang="css"]<br />
#topcontrol:hover {<br />
	background: #373737;<br />
}<br />
[&#47;cce]</p>
<p>На этом у меня всё, надеюсь вы с первого раза смогли понять, что я хотел до вас донести. Но если возникли вопросы, пожелания или что еще, то не стесняйтесь писать всё в комментарии. И да, лирическое отступление вначале про <em>обычных<&#47;em> людей - это шутка. Я не зазнавшийся гик и даже не просто гик, но правда с Олимпа спуститься пришлось. Надеюсь у всех с чувством умора хорошо и никто не обиделся. Удачи!</p>

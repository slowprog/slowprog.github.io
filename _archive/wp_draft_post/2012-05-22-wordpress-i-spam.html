---
layout: post
status: publish
published: true
title: WordPress и спам
author:
  display_name: SlowProg
  login: seoadmin
  email: paperplanesu@rambler.ru
  url: http://paperplane.su
author_login: seoadmin
author_email: paperplanesu@rambler.ru
author_url: http://paperplane.su
wordpress_id: 2442
wordpress_url: http://paperplane.su/?p=2442
date: '2012-05-22 17:13:14 +0400'
date_gmt: '2012-05-22 13:13:14 +0400'
categories:
- Оптимизация
tags:
- спам
comments:
- id: 47521
  author: Екатерина
  author_email: katrina565@gmail.com
  author_url: ''
  date: '2012-05-23 00:02:11 +0400'
  date_gmt: '2012-05-22 20:02:11 +0400'
  content: "Пользуюсь \"Пчелкой\" - трудится отлично\r\nВот мой скромный список. \r\n110.85.73.216\r\n46.21.144.176\r\n120.43.21.228\r\n222.77.229.113\r\n46.109.194.46"
- id: 47631
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-05-24 00:49:22 +0400'
  date_gmt: '2012-05-23 20:49:22 +0400'
  content: Спасибо за адреса, один у меня уже был, а остальные 4 добавил!
- id: 49308
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2012-06-04 15:50:57 +0400'
  date_gmt: '2012-06-04 11:50:57 +0400'
  content: "Смысл забивать ip адреса попавшиеся со спамом один раз? \r\n\r\nВедь это
    могут быть и динамические адреса. Получается что нормальный пользователь может
    потом не зайти с этого ip. \r\n\r\nВ вордпрессе есть в \"параметрах\" - \"обсуждение\"
    - черный список - туда можно просто ключевые слова забивать (почту тоже)."
- id: 49312
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-06-04 16:09:01 +0400'
  date_gmt: '2012-06-04 12:09:01 +0400'
  content: На счет динамических все верно подмечено. Точнее они скорее всего почти
    все динамические , тут палка о двух концах. Но в целом можно найти постоянных
    спамеров. Тут каждый сам выберет себе способ =)
- id: 83409
  author: WPixel
  author_email: info@wpixel.ru
  author_url: http://wpixel.ru
  date: '2012-09-11 10:40:50 +0400'
  date_gmt: '2012-09-11 06:40:50 +0400'
  content: "вот мой скромный список \r\n192.162.19.196\r\n91.231.40.27\r\nпоследниюю
    неделю одолевают с этих ай пи"
- id: 83424
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-09-11 11:24:01 +0400'
  date_gmt: '2012-09-11 07:24:01 +0400'
  content: Спасибо! Будем бороться с ними вместе! А то с каждым днем спамеров становится
    всё больше и больше.
- id: 84865
  author: WPixel
  author_email: info@wpixel.ru
  author_url: http://wpixel.ru
  date: '2012-09-15 12:52:27 +0400'
  date_gmt: '2012-09-15 08:52:27 +0400'
  content: "В какое место в .htaccess прописывать это\r\n\"\r\norder allow,deny\r\ndeny
    from 178.137.18.72\r\nallow from all\r\n\"\r\nможно пример .htaccess ?"
- id: 84877
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-09-15 14:29:08 +0400'
  date_gmt: '2012-09-15 10:29:08 +0400'
  content: А это у вас и есть пример .htaccess. Просто в самое начало киньте этот
    код и он будет работать.
- id: 84883
  author: WPixel
  author_email: info@wpixel.ru
  author_url: http://wpixel.ru
  date: '2012-09-15 14:54:26 +0400'
  date_gmt: '2012-09-15 10:54:26 +0400'
  content: спасибо попробуем,а то зачастили что то
- id: 103345
  author: Простой
  author_email: druzbasaytami@mail.ru
  author_url: http://nikosun.com/
  date: '2012-11-01 21:26:23 +0400'
  date_gmt: '2012-11-01 17:26:23 +0400'
  content: Борьба со спамом на сайте нужная вещь.
- id: 120455
  author: Лариса
  author_email: albra2011@mail.ru
  author_url: http://larsan.ru/
  date: '2012-11-24 03:31:18 +0400'
  date_gmt: '2012-11-23 23:31:18 +0400'
  content: Со спамом ,конечно,нужно бороться.У меня в последние дни сыпется куча комментов
    и все зарубежные.Некоторые с профилей,а некоторые непонятно откуда. Тратится уйма
    времени на сортировку этого"добра". Обязательно попробую Antispam Bee.
- id: 120605
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-11-24 07:22:50 +0400'
  date_gmt: '2012-11-24 03:22:50 +0400'
  content: Обязательно его заюзайте, ваши заграничные "друзья" сразу отвалят =) и
    запомните, чем популярные блог, тем больше спама, так что не медлите с установкой.
- id: 120678
  author: Лариса
  author_email: albra2011@mail.ru
  author_url: http://larsan.ru/
  date: '2012-11-24 09:27:46 +0400'
  date_gmt: '2012-11-24 05:27:46 +0400'
  content: Уже установила.И тут же  некоторые полетели в спам.Какое счастье! А то
    сиди,разбирайся,что они там на своем языке написали.
- id: 120722
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2012-11-24 11:49:34 +0400'
  date_gmt: '2012-11-24 07:49:34 +0400'
  content: "У вас в статье не отображается список по клику на <strong>\"Отобразить
    список\"<&#47;strong> <blockquote>Метка времени: 24.11.2012 11:48:02\r\nОшибка:
    ReferenceError: elsespoiler is not defined\r\nИсточник: http:&#47;&#47;paperplane.su&#47;wordpress-i-spam&#47;#\r\nСтрока:
    1<&#47;blockquote>\r\n\r\nТо-есть функция спойлера поламалась"
- id: 121616
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-11-25 19:10:28 +0400'
  date_gmt: '2012-11-25 15:10:28 +0400'
  content: Пасибо за наводку. Вроде всё поправил. В разных браузерах потестил, всё
    робит.
- id: 123473
  author: Olunka
  author_email: olunka-com@yandex.ru
  author_url: http://www.olunka.ru/
  date: '2012-11-27 14:40:42 +0400'
  date_gmt: '2012-11-27 10:40:42 +0400'
  content: "Блокировка комментаторов без referer работает не корректно.\r\nПри установке
    этого код в блог вообще никто не может оставить комментарии. При нажатии кнопки
    \"Отправить комментарий\" появляется сообщение, что пользователь запрашивает несуществующую
    страницу."
- id: 123497
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-11-27 15:32:55 +0400'
  date_gmt: '2012-11-27 11:32:55 +0400'
  content: У меня всё работает.  Я установил этот код к себе на блог и проверил, всё
    прошло. Может вы чего не так вставили или не туда? В файл .htaccess в конец весь
    этот код. так?
- id: 124651
  author: Olunka
  author_email: olunka-com@yandex.ru
  author_url: http://www.olunka.ru/
  date: '2012-11-28 15:24:55 +0400'
  date_gmt: '2012-11-28 11:24:55 +0400'
  content: "Все так как описано, но результат другой.\r\nМне пользователи на почту
    стали писать, что невозможно оставить комментарий, проверила и правда.\r\n\r\nСейчас
    код убрала, потому вам удалось оставить коммент."
- id: 124828
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-11-28 22:44:20 +0400'
  date_gmt: '2012-11-28 18:44:20 +0400'
  content: "ХМ хм, может быть у вас както при комментировании реффер обрезается...
    я даже не знаю. Тут нужно тестить, смотреть, в лог лезть, может там ошибки будут.
    Но на крайняк это можно и не использовать, вообще Антиспамной пчелой можно защититься
    =)\r\n\r\nИ еще глупый вопрос. Вы на свой домен сменили???"
- id: 125487
  author: Olunka
  author_email: olunka-com@yandex.ru
  author_url: http://www.olunka.ru/
  date: '2012-11-29 20:45:28 +0400'
  date_gmt: '2012-11-29 16:45:28 +0400'
  content: Да, на том домене, на который тут ссылка с ника остается
- id: 125491
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-11-29 20:48:39 +0400'
  date_gmt: '2012-11-29 16:48:39 +0400'
  content: 'Хм, я бы мог попробовать помочь в этом деле. Примерно по следующему алгоритму:
    вы ставите код, я пробую закомментить, смотрю результат и вы мне скидывете лог
    ошибок. После этого код сразу убираете, а я постараюсь что-нибудь придумать. Может
    дам какие советы. Хотя алгоритм не самый лучший, мне бы лучше полный доступ, но
    я особо борзеть не буду.'
- id: 126977
  author: Olunka
  author_email: olunka-com@yandex.ru
  author_url: http://www.olunka.ru/
  date: '2012-12-01 17:20:56 +0400'
  date_gmt: '2012-12-01 13:20:56 +0400'
  content: "Ох, с логами ошибок я не очень дружу.\r\nДумаю бросить пока эту проблему,
    спама идет не очень много, пока есть возможность ручного модерирования."
- id: 126990
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-01 18:12:11 +0400'
  date_gmt: '2012-12-01 14:12:11 +0400'
  content: Ну смотрите, если в дальнейшем будут проблемы - спама станет больше, то
    пишите и постараемся решить данный вопрос.
- id: 126991
  author: Olunka
  author_email: olunka-com@yandex.ru
  author_url: http://www.olunka.ru/
  date: '2012-12-01 18:12:35 +0400'
  date_gmt: '2012-12-01 14:12:35 +0400'
  content: "Извиняюсь, похоже я прохлопала ошибку.\r\nПоставила код еще раз, все работает.\r\nВозможно
    в прошлый раз забыла сменить доменное имя в коде, хотя теперь не поймешь."
- id: 126992
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-01 18:14:02 +0400'
  date_gmt: '2012-12-01 14:14:02 +0400'
  content: Все хорошо, что хорошо кончается =)
- id: 126993
  author: Olunka
  author_email: olunka-com@yandex.ru
  author_url: http://www.olunka.ru/
  date: '2012-12-01 18:15:32 +0400'
  date_gmt: '2012-12-01 14:15:32 +0400'
  content: а с вами можно связать по скайпу или аське?
- id: 126995
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-01 18:21:01 +0400'
  date_gmt: '2012-12-01 14:21:01 +0400'
  content: напишите в форму обратной связи и выдам аську =)
- id: 127017
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2012-12-01 19:35:16 +0400'
  date_gmt: '2012-12-01 15:35:16 +0400'
  content: "1. Специально решил проверить способ блокировки посетителей без referer.
    т.к. со спамом я никак не боролся и блог без всяких мер имел по 30-50 спам комментариев
    в день, то поставив способ отлавливания без referrer - сравнил. Боты сейчас умные
    и разницы я не увидел. Приходили также по 50 комментариев (естественно они ожидали
    одобрения, а не выпускались сразу на сайт). Так что этот метод определения ботов
    не работает.\r\n\r\n2. Ну т.к по ip банить чревато, то этот способ почти не в
    приоритете.  Исключение есть. Используя плагин ограничивающий попытки авторизации
    limit login attempts, я смотрю, с каких айпишников происходят попытки войти.\r\n\r\nТак
    вот для примера одна из строчек: <strong>93.186.102.34\toffice (3 изоляций), administrator
    (1 изоляция), server (4 изоляций), user (1 изоляция), qwerty123 (1 изоляция),
    test (1 изоляция), qwe123 (1 изоляция), 123456789 (1 изоляция), adm (1 изоляция)<&#47;strong>\r\n\r\nнамекает
    нам, что это постоянный айпи, т.к. вероятность случайного совпадения <strong>IPразный
    злоумышленник<&#47;strong> крайне мала. И этот тип не успокоился и, раз в месяц,
    раз в два месяца, но он продолжает попытки войти на сайт. Вот этот айпишник и
    можно смело прописывать в файле .htaccess\r\n\r\n3. Но конечно же лучший способ
    - в подмене поля комментирования по id.\r\n\r\nВыполнив его - я остановил спам.
    Неделю ни одного спама. А человечные комментарии проходят. Пришлось подправить
    пару функций использующих комментарии - заменил id и всё заработало как и прежде.\r\n\r\nПлагины
    против спама не ставлю - ибо это зло, а капчу использовать или ставить чекбокс
    чтоб отправить комментарий - это отпугивает людей. И количество полезных комментариев
    уменьшится. Так что лучше тоже не применять.\r\n\r\nСам как от дьявола бегу с
    тех сайтов где стоит reCAPTCHA :)"
- id: 127019
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-01 19:40:23 +0400'
  date_gmt: '2012-12-01 15:40:23 +0400'
  content: "Согласен со всем, что написано. Что-то уже не работает, а что-то лучше
    не использовать. Подмена поля самый эффектиный метод. Но скажу по чесноку что
    это не панацея. Можно писать роботов которые JS интерпретируют, просто пока всем
    лень и тких роботов по пальцем сосчитать можно. \r\n\r\nИ кстати тот парень что
    брутфрсит админку может быть вашим постоянным читателем xDDDD"
- id: 127023
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2012-12-01 19:58:28 +0400'
  date_gmt: '2012-12-01 15:58:28 +0400'
  content: "Постоянный читатель который брутфорсит админку - это как друг который
    держит за спиною нож? Оно нам не надо таких друзей :)\r\n\r\nНе панацея, конечно
    подмена поля, но плагины, капчи и чекбоксы перед отправкой - это тоже не панацея.
    При индивидуальном подходе"
- id: 127028
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-01 20:18:43 +0400'
  date_gmt: '2012-12-01 16:18:43 +0400'
  content: "Согласен, но можно было просто у него нож отнять, а зачем же вообще банить.
    В том смысле, что запретить доступ на страницу авторизации, что вроде этого:\r\n<code><files
    wp-login.php>\r\nallow from all\r\ndeny from 93.186.102.34\r\n<&#47;files><&#47;code>\r\nКапчи
    просто жестокая фигня, которую нужно сжечь на костре за ересь. Хотя иногда они
    нужны, но не в блогах. тут люди общаются и любое препятствие это зло."
- id: 127033
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2012-12-01 21:12:16 +0400'
  date_gmt: '2012-12-01 17:12:16 +0400'
  content: Вы правы насчет ограничения к файлу авторизации. Пожалуй так и сделаю.
- id: 130324
  author: skv
  author_email: sexsonne@yandex.ru
  author_url: http://dumaidelai.ru/
  date: '2012-12-22 15:35:23 +0400'
  date_gmt: '2012-12-22 11:35:23 +0400'
  content: "<strong>Приветствую!!<&#47;strong> именно плагин Antispam Bee я и использую
    с первых дней жизни моего блога может когда и его заменю на код автора но пока
    и так хорошо живеться))"
- id: 130328
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2012-12-22 15:56:12 +0400'
  date_gmt: '2012-12-22 11:56:12 +0400'
  content: Всё верно, как бы я не был против плагинов, но этот очень мал и очень крут,
    так что я его тоже себе поставил. Чтобы в дальнейшем не париться о спаме =)
- id: 134326
  author: Очистка и оптимизация базы данных в wordpress | Выживи сам
  author_email: ''
  author_url: http://vichivisam.ru/?p=17181
  date: '2013-01-22 20:33:53 +0400'
  date_gmt: '2013-01-22 16:33:53 +0400'
  content: "[...] комментарии. Кстати, дополнительно читайте борьба со спамом в WordPress.
    А тут я приведу несколько примеров запросов, которые [...]"
- id: 147794
  author: Алекс
  author_email: street@gmail.com
  author_url: http://mj4.ru
  date: '2013-04-19 14:37:47 +0400'
  date_gmt: '2013-04-19 10:37:47 +0400'
  content: 31.128.224.184 от этого падонка пришло 100 комментов.
- id: 147795
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-04-19 14:39:09 +0400'
  date_gmt: '2013-04-19 10:39:09 +0400'
  content: Добавили =)
- id: 152885
  author: Александр
  author_email: alvas1985@rambler.ru
  author_url: ''
  date: '2013-05-03 02:25:17 +0400'
  date_gmt: '2013-05-02 22:25:17 +0400'
  content: А спойлеры у вас тоже самостоятельно написаны?
- id: 152900
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-05-03 02:53:17 +0400'
  date_gmt: '2013-05-02 22:53:17 +0400'
  content: Да да, дык там и кода с гулькин нос. Он прямо в статье рядом со спойлером.
    Ничего сложного.
- id: 170154
  author: Sandro
  author_email: beta.com7@gmail.com
  author_url: http://tef.co.ua/
  date: '2013-06-30 15:52:54 +0400'
  date_gmt: '2013-06-30 11:52:54 +0400'
  content: "<blockquote> Ниже я даю вам свой список и буду вам очень благодарен, если
    вы мне дадите свои. <&#47;blockquote>\r\nПоддерживаю данное здесь мнение, что
    ай-пи может быть динамическим, и не давать захода нормальным людям. Но иногда
    так достанут, что я об этом забываю.\r\nМой список \"особо злостных\"\r\n109.184.187.130\r\n2.93.104.225\r\n78.107.222.66"
- id: 170227
  author: Otshelnik-fm
  author_email: Otshelnik-Fm@yandex.ru
  author_url: http://beoff.ru
  date: '2013-07-01 01:02:10 +0400'
  date_gmt: '2013-06-30 21:02:10 +0400'
  content: "<blockquote>3. Но конечно же лучший способ - в подмене поля комментирования
    по id.\r\n\r\nВыполнив его - я остановил спам. Неделю ни одного спама. А человечные
    комментарии проходят. Пришлось подправить пару функций использующих комментарии
    - заменил id и всё заработало как и прежде.<&#47;blockquote> -  Это мой же комментарий
    1.12.2012 в 19:35 в этой теме. \r\n\r\nХочу, спустя почти 8 месяцев, отписаться
    что и как со спамом в комментариях. Подмена id дало свои результаты. Ни одного
    спам комментария (500 уников в день). А человеческие идут, как ни в чем не бывало.
    И нет никакой капчи, и не нужно комментатору дополнительных действий. Это действительно
    работает.\r\n\r\nНу а по брутфорс админки - продолжаются они и я накапливаю сведения.
    Например в логах есть такой: <blockquote>195.242.218.71\tadministrator (2 изоляций),
    123456 (4 изоляций), andrew (1 изоляция), password (4 изоляций), root (5 изоляций),
    admin (3 изоляций), 1234567 (4 изоляций), guest (1 изоляция), admin123 (1 изоляция),
    demo (1 изоляция), 111111 (1 изоляция), eminem (2 изоляций), superman (1 изоляция),
    user (1 изоляция)<&#47;blockquote>\r\n\r\nНо самый упоротый вот этот: 94.125.184.50
    подбирает \"admin\" (56 изоляций) - всё приходит и приходит, и огребает  и огребает
    :)"
- id: 170236
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2013-07-01 02:13:56 +0400'
  date_gmt: '2013-06-30 22:13:56 +0400'
  content: "Подмена тоже не 100% результат даёт. Но в большинстве случаев срабатывает
    на отлично. \r\n\r\nА за опыт спасибо =) Побольше бы все делились своими наблюдениями,
    глядишь и мир бы стал лучше =D"
- id: 181573
  author: RomanZmeu
  author_email: zmeu@mail.ru
  author_url: http://roman.burashnikov.name/
  date: '2013-08-27 16:38:46 +0400'
  date_gmt: '2013-08-27 12:38:46 +0400'
  content: Спасибо. Пригодилось для моего блога
- id: 237214
  author: Djo
  author_email: ermak_not@mail.ru
  author_url: ''
  date: '2014-08-22 09:26:44 +0400'
  date_gmt: '2014-08-22 05:26:44 +0400'
  content: А я в борьбе с спамом решил пойти своим путём и написал свой плагин. Всю
    логику по оценке спама возложил на сервис Яндекс.Чистый Веб. Собственно вот что
    получилось http:&#47;&#47;wordpress.org&#47;plugins&#47;spam-oborona-yandexcleanweb&#47;
- id: 237215
  author: SlowProg
  author_email: paperplanesu@rambler.ru
  author_url: http://paperplane.su
  date: '2014-08-22 09:29:51 +0400'
  date_gmt: '2014-08-22 05:29:51 +0400'
  content: Хм, отличная идея. Надо будет попробовать как-нибудь. Яндекс.Чистый Веб
    должен отлично сработать =)
- id: 237613
  author: Djo
  author_email: ermak_not@mail.ru
  author_url: ''
  date: '2014-09-01 12:27:50 +0400'
  date_gmt: '2014-09-01 08:27:50 +0400'
  content: Будут предложения и пожелания, пишите, веду активную разработку
---
<p><a href="http:&#47;&#47;image.paperplane.su&#47;2012&#47;05&#47;stop-spam.png"><img class="alignleft size-medium wp-image-2501" title="WordPress и спам" src="http:&#47;&#47;image.paperplane.su&#47;2012&#47;05&#47;stop-spam-300x300.png" alt="WordPress и спам" width="300" height="300" &#47;><&#47;a> Доброе время суток, сегодня я хочу поговорить о <strong>WordPress и спаме<&#47;strong>, а точнее о том, как бороться со спамом. Просто в последнее время спам в комментариях блогов на WordPress приобретает незаурядную массовость и уже начинает пугать. Например, в предыдущем месяце у меня были тысячи и тысячи спам-комментариев, притом были как отечественные, так и импортные. И тогда я задумался не просто об отгораживании себя от спам-комментариев, но и вообще от заходов спамеров на мой блог. Ведь сами подумайте, спам-боты тысячи раз отправляют запросы на добавления комментария, тем самым крадут ресурсы вашего сервера и кушают трафик. Особенно это актуально на шаред хостингах, где превышение лимита использования процессорного времени влечет санкции со стороны хостера.</p>
<p>В связи с выше написанным я призадумался о способах защиты, проанализировал многие из них и оказалось, что далеко не все они превентивные. Т.е. пресечение спамного комментария идет только на этапе отправления его. Это крайний, так сказать, случай, потому что ресурсы уже были украдены. Ладно если один-два спамера, а если их тысячи, то нагрузка на сервер возрастает значительно. Поэтому я разделю методы защиты на превентивные и остальные, начнем с первых.</p>
<h2 style="text-align: center;">Превентивные меры<&#47;h2><br />
К превентивным мерам борьбы со спамерами я отнесу те, которые позволят максимально сэкономить ресурсы сервера. А ресурсы сервера будут тогда сэкономлены, когда спамер даже не сможет зайти на сайт. Тут вариантов немного.</p>
<h3>Заблокировать по IP<&#47;h3><br />
Спамеры частенько меняют свои IP и периодически шлют одни и те же комментарии с разных IP. Но так или иначе часть спамеров можно заблокировать. Эти АйПишники можно собирать в комментариях WordPress, там у каждого комментария отображается IP-адрес, с которого он был отправлен. Вот так постепенно можно собрать большой список этих адресов. А что с ними делать дальше? Все очень просто! Необходимо их внести в файл <em>.htaccess<&#47;em>, который находится в корне вашего сайта (если его там нет, то создайте). В него необходимо внести следующий код:<br />
[cce lang="text"]<Limit GET POST><br />
order allow,deny<br />
deny from 178.137.18.72<br />
allow from all<br />
<&#47;Limit>[&#47;cce]<br />
Соответственно, вместо этого IP можно вставить другой и добавить еще больше. Добавить очень просто, необходимо скопировать строку с IP и заменить в ней только адрес на новый. Так можно накопить большой список. Что я вас и призываю делать. Ниже я даю вам свой список и буду вам очень благодарен, если вы мне дадите свои. Я ваши списки солью со своим. Вместе мы составим большой список спамеров, которые не смогут даже войти на наши блоги. Чтобы увидеть все адреса, кликните по <em>Отобразить список<&#47;em>.<br />
<script type="text&#47;javascript"><br />
    function ShowHideContent(spoiler)  {<br />
if (spoiler.style.display != 'none') {<br />
spoiler.style.display = 'none';<br />
}else{<br />
spoiler.style.display = 'block'; return false;}}<br />
<&#47;script><br />
<a onClick="ShowHideContent(document.getElementById('cut')); return false;" href="#">Отобразить список<&#47;a></p>
<div id="cut" style="display: none;">
[cce lang="text"]deny from 178.137.18.72<br />
deny from 178.151.241.238<br />
deny from 188.138.84.93<br />
deny from 46.183.162.15<br />
deny from 193.33.171.251<br />
deny from 178.150.227.126<br />
deny from 159.224.100.137<br />
deny from 94.142.130.200<br />
deny from 188.187.137.210<br />
deny from 176.8.90.6<br />
deny from 178.210.32.201<br />
deny from 46.118.139.223<br />
deny from 91.224.160.140<br />
deny from 194.146.197.3<br />
deny from 188.143.233.142<br />
deny from 178.211.98.250<br />
deny from 91.207.4.202<br />
deny from 188.165.230.33<br />
deny from 94.75.118.123<br />
deny from 91.121.179.37<br />
deny from 95.133.81.189<br />
deny from 85.222.103.41<br />
deny from 91.76.42.219<br />
deny from 91.207.5.198<br />
deny from 195.62.25.247<br />
deny from 46.118.139.10<br />
deny from 109.230.245.176<br />
deny from 82.193.117.23<br />
deny from 46.183.162.114<br />
deny from 159.224.130.182<br />
deny from 195.62.25.249<br />
deny from 176.8.90.218<br />
deny from 83.6.25.179<br />
deny from 178.47.193.174<br />
deny from 176.31.104.41<br />
deny from 91.76.8.34<br />
deny from 178.73.48.69<br />
deny from 94.79.54.144<br />
deny from 109.230.244.104<br />
deny from 94.244.21.19<br />
deny from 46.118.160.215<br />
deny from 195.62.25.253<br />
deny from 46.183.162.92<br />
deny from 46.251.227.3<br />
deny from 94.142.133.190<br />
deny from 195.58.245.138<br />
deny from 178.210.216.140<br />
deny from 178.42.2.78<br />
deny from 31.184.236.63<br />
deny from 46.109.198.121<br />
deny from 188.143.232.20<br />
deny from 199.168.142.166<br />
deny from 91.207.8.26<br />
deny from 46.183.162.86<br />
deny from 79.140.23.187<br />
deny from 95.73.26.41<br />
deny from 46.17.96.220<br />
deny from 77.93.2.81<br />
deny from 178.137.160.135<br />
deny from 95.82.233.17<br />
deny from 46.183.162.174<br />
deny from 176.8.88.239<br />
deny from 46.183.162.48<br />
deny from 195.117.61.211<br />
deny from 46.183.162.176<br />
deny from 85.25.95.90<br />
deny from 91.76.16.197<br />
deny from 195.190.13.174<br />
deny from 46.183.162.198<br />
deny from 212.58.205.226<br />
deny from 178.137.18.22<br />
deny from 141.105.66.165<br />
deny from 46.183.162.200<br />
deny from 178.137.167.132<br />
deny from 178.42.164.97<br />
deny from 95.72.192.221<br />
deny from 31.29.138.89<br />
deny from 109.196.18.4<br />
deny from 95.73.37.7<br />
deny from 193.105.210.146<br />
deny from 83.21.212.79<br />
deny from 188.143.232.7<br />
deny from 95.65.77.99<br />
deny from 95.65.79.220<br />
deny from 46.183.162.30<br />
deny from 178.137.19.242<br />
deny from 77.93.37.26<br />
deny from 46.183.162.87<br />
deny from 92.39.76.212<br />
deny from 91.76.15.116<br />
deny from 212.200.246.86<br />
deny from 79.140.166.45<br />
deny from 178.172.186.30<br />
deny from 80.245.85.45<br />
deny from 95.132.223.74<br />
deny from 95.72.177.215<br />
deny from 193.33.171.254<br />
deny from 31.184.236.16<br />
deny from 128.68.29.77<br />
deny from 82.138.58.3<br />
deny from 146.0.73.230<br />
deny from 176.196.59.19<br />
deny from 178.137.16.61<br />
deny from 83.28.45.207<br />
deny from 46.183.162.67<br />
deny from 46.183.162.4<br />
deny from 95.72.88.223<br />
deny from 89.252.159.248<br />
deny from 173.234.248.43<br />
deny from 91.76.12.130<br />
deny from 188.165.246.91<br />
deny from 46.183.162.65<br />
deny from 46.118.134.135<br />
deny from 95.72.21.46<br />
deny from 95.73.39.34<br />
deny from 46.183.162.38<br />
deny from 188.143.233.157<br />
deny from 176.14.247.217<br />
deny from 83.24.193.43<br />
deny from 173.208.62.131<br />
deny from 195.82.154.23<br />
deny from 41.190.16.17<br />
deny from 46.183.167.39<br />
deny from 91.76.41.249<br />
deny from 46.183.162.72<br />
deny from 46.109.194.135<br />
deny from 85.114.204.63<br />
deny from 176.14.247.217<br />
deny from 46.183.162.80<br />
deny from 62.75.181.210<br />
deny from 94.181.11.40<br />
deny from 178.137.161.127<br />
deny from 46.183.162.213<br />
deny from 31.184.236.66<br />
deny from 119.160.130.61<br />
deny from 178.137.135.54<br />
deny from 188.233.23.223<br />
deny from 91.76.12.200<br />
deny from 128.68.23.205<br />
deny from 46.183.162.225<br />
deny from 193.33.171.252<br />
deny from 109.230.222.226<br />
deny from 193.33.171.252<br />
deny from 91.76.12.200<br />
deny from 94.142.135.225<br />
deny from 46.183.167.7<br />
deny from 178.172.186.25<br />
deny from 91.202.56.31<br />
deny from 195.62.25.248<br />
deny from 91.207.6.118<br />
deny from 46.183.162.125<br />
deny from 94.180.37.43<br />
deny from 93.178.210.93<br />
deny from 91.76.6.154<br />
deny from 76.104.178.34<br />
deny from 46.118.133.209<br />
deny from 175.136.233.76<br />
deny from 71.199.195.233<br />
deny from 200.141.202.162<br />
deny from 188.233.47.40<br />
deny from 81.201.17.87<br />
deny from 202.144.63.10<br />
deny from 46.240.64.90<br />
deny from 92.252.209.178<br />
deny from 89.31.88.148<br />
deny from 188.143.232.65<br />
deny from 82.148.109.69<br />
deny from 213.111.203.183<br />
deny from 46.183.162.148<br />
deny from 94.180.72.56<br />
deny from 210.101.131.231<br />
deny from 110.164.3.180<br />
deny from 94.180.20.202<br />
deny from 91.207.7.254<br />
deny from 90.150.107.160<br />
deny from 95.73.26.219<br />
deny from 95.73.39.124<br />
deny from 46.118.133.120<br />
deny from 178.137.161.218<br />
deny from 178.94.137.177<br />
deny from 95.72.201.165<br />
deny from 176.8.90.65<br />
deny from 69.22.179.135<br />
deny from 178.42.97.19<br />
deny from 82.193.109.52<br />
deny from 46.109.192.45<br />
deny from 46.242.105.239<br />
deny from 46.118.133.55<br />
deny from 216.172.135.14<br />
deny from 46.183.162.230<br />
deny from 193.33.171.253<br />
deny from 92.113.11.35<br />
deny from 176.36.55.14<br />
deny from 109.230.246.166<br />
deny from 46.183.162.42<br />
deny from 91.76.22.146<br />
deny from 188.143.233.159<br />
deny from 95.49.208.70<br />
deny from 46.183.162.74<br />
deny from 46.237.20.112<br />
deny from 176.9.34.50<br />
deny from 93.79.224.201<br />
deny from 31.23.146.235<br />
deny from 188.114.45.76<br />
deny from 46.183.162.135<br />
deny from 190.3.106.163<br />
deny from 176.8.90.186<br />
deny from 91.204.131.23<br />
deny from 195.138.88.105<br />
deny from 111.171.192.158<br />
deny from 178.137.19.137<br />
deny from 46.183.162.58<br />
deny from 91.207.6.174<br />
deny from 91.212.226.95<br />
deny from 213.111.225.146<br />
deny from 93.127.40.41<br />
deny from 95.78.0.60<br />
deny from 46.183.167.9<br />
deny from 79.172.35.212<br />
deny from 93.178.95.86<br />
deny from 187.141.81.182<br />
deny from 78.106.220.132<br />
deny from 95.143.22.42<br />
deny from 91.76.5.241<br />
deny from 95.28.158.106<br />
deny from 94.101.160.159<br />
deny from 46.183.162.162<br />
deny from 95.73.113.33<br />
deny from 188.233.18.112<br />
deny from 178.73.44.4<br />
deny from 212.93.105.37<br />
deny from 67.55.115.76<br />
deny from 176.8.89.198<br />
deny from 94.180.11.136<br />
deny from 24.128.15.196<br />
deny from 81.30.186.5<br />
deny from 128.68.108.195<br />
deny from 46.183.167.46<br />
deny from 79.170.50.100<br />
deny from 94.41.26.233<br />
deny from 31.23.224.198<br />
deny from 94.180.92.76<br />
deny from 31.23.143.189<br />
deny from 178.42.70.75<br />
deny from 46.183.162.29<br />
deny from 46.118.130.243<br />
deny from 95.129.166.129<br />
deny from 27.2.0.25<br />
deny from 83.21.213.100<br />
deny from 109.162.72.21<br />
deny from 178.137.19.27<br />
deny from 46.237.11.159<br />
deny from 46.119.32.20<br />
deny from 95.143.21.105<br />
deny from 46.183.162.117<br />
deny from 46.183.162.143<br />
deny from 50.57.116.65<br />
deny from 95.72.65.2<br />
deny from 91.76.17.17<br />
deny from 46.119.35.128<br />
deny from 46.183.162.115<br />
deny from 46.118.157.9<br />
deny from 178.125.173.124<br />
deny from 31.163.162.31<br />
deny from 189.238.55.251<br />
deny from 46.183.162.59<br />
deny from 95.65.82.116<br />
deny from 91.76.25.65<br />
deny from 46.183.162.55<br />
deny from 31.23.140.5<br />
deny from 95.143.20.213<br />
deny from 46.183.162.9<br />
deny from 188.114.55.66<br />
deny from 91.76.27.61<br />
deny from 178.137.163.94<br />
deny from 46.118.129.81<br />
deny from 46.183.162.53<br />
deny from 31.163.131.33<br />
deny from 188.163.26.190<br />
deny from 46.119.54.166<br />
deny from 94.41.42.18<br />
deny from 107.22.57.15<br />
deny from 95.158.0.38<br />
deny from 46.183.162.163<br />
deny from 50.57.226.93<br />
deny from 46.183.162.150<br />
deny from 31.23.102.240<br />
deny from 178.137.167.166<br />
deny from 182.71.68.99<br />
deny from 83.28.176.50<br />
deny from 95.143.22.190<br />
deny from 46.183.162.210<br />
deny from 77.79.175.160<br />
deny from 95.143.23.91<br />
deny from 46.237.7.226<br />
deny from 82.209.116.85<br />
deny from 95.143.23.185<br />
deny from 109.230.246.176<br />
deny from 94.41.17.4<br />
deny from 91.76.13.168<br />
deny from 46.47.33.69<br />
deny from 95.143.22.93<br />
deny from 46.183.162.242<br />
deny from 109.205.248.29<br />
deny from 95.143.23.186<br />
deny from 46.21.144.176<br />
deny from 95.143.21.72<br />
deny from 95.143.21.243<br />
deny from 46.183.162.13<br />
deny from 89.178.169.111<br />
deny from 91.76.26.88<br />
deny from 178.137.167.189<br />
deny from 80.245.85.114<br />
deny from 217.118.95.85<br />
deny from 46.183.162.109<br />
deny from 31.23.1.50<br />
deny from 77.79.175.160<br />
deny from 91.76.14.25<br />
deny from 46.183.162.46<br />
deny from 95.65.31.160<br />
deny from 49.212.38.134<br />
deny from 93.79.185.108<br />
deny from 31.23.26.171<br />
deny from 46.183.167.24<br />
deny from 95.143.23.81<br />
deny from 122.155.0.135<br />
deny from 95.143.20.173<br />
deny from 95.24.140.86<br />
deny from 109.165.8.132<br />
deny from 83.21.194.136<br />
deny from 91.207.6.86<br />
deny from 46.183.162.126<br />
deny from 91.224.160.130<br />
deny from 95.72.68.17<br />
deny from 46.183.162.184<br />
deny from 31.181.131.46<br />
deny from 109.106.141.146<br />
deny from 95.143.20.173<br />
deny from 195.62.25.252<br />
deny from 95.143.20.173<br />
deny from 178.42.94.40<br />
deny from 46.237.30.93<br />
deny from 46.183.162.62<br />
deny from 193.106.201.210<br />
deny from 91.121.156.106<br />
deny from 114.199.126.122<br />
deny from 46.147.65.28<br />
deny from 109.162.59.76<br />
deny from 46.183.162.63<br />
deny from 31.178.7.2<br />
deny from 178.137.19.190<br />
deny from 71.67.184.149<br />
deny from 46.183.162.202<br />
deny from 46.183.167.34<br />
deny from 163.30.176.9<br />
deny from 95.143.21.32<br />
deny from 95.25.223.202<br />
deny from 95.86.252.75<br />
deny from 46.183.162.31<br />
deny from 95.143.23.1<br />
deny from 178.137.16.205<br />
deny from 178.137.16.205<br />
deny from 188.143.232.210<br />
deny from 95.143.23.157<br />
deny from 94.180.17.74<br />
deny from 178.140.183.156<br />
deny from 83.9.140.185<br />
deny from 195.229.241.173<br />
deny from 210.164.226.243<br />
deny from 91.212.226.82<br />
deny from 31.184.238.50<br />
deny from 95.143.21.12<br />
deny from 188.143.233.129<br />
deny from 213.142.63.199<br />
deny from 188.143.233.129<br />
deny from 109.205.254.14<br />
deny from 31.23.82.219<br />
deny from 91.224.161.160<br />
deny from 46.237.23.193<br />
deny from 109.230.244.126<br />
deny from 178.205.47.78<br />
deny from 82.165.143.89<br />
deny from 46.185.31.164<br />
deny from 46.118.128.112<br />
deny from 178.137.160.9<br />
deny from 46.237.11.125<br />
deny from 98.214.154.230<br />
deny from 95.143.21.9<br />
deny from 46.183.162.214<br />
deny from 94.142.135.48<br />
deny from 83.9.235.102<br />
deny from 95.26.87.76<br />
deny from 79.142.163.86<br />
deny from 46.237.30.85<br />
deny from 77.95.93.10<br />
deny from 46.237.6.103<br />
deny from 178.137.186.130<br />
deny from 109.165.94.244<br />
deny from 188.163.69.35<br />
deny from 46.183.162.93<br />
deny from 89.249.246.32<br />
deny from 46.191.171.234<br />
deny from 95.27.7.47<br />
deny from 46.183.162.56<br />
deny from 178.124.193.147<br />
deny from 46.183.167.32<br />
deny from 46.183.162.199<br />
deny from 92.113.27.247<br />
deny from 46.183.162.119<br />
deny from 176.215.66.110<br />
deny from 200.5.122.147<br />
deny from 77.108.122.245<br />
deny from 212.111.208.2<br />
deny from 193.105.210.88<br />
deny from 188.134.60.76<br />
deny from 46.183.162.68<br />
deny from 95.27.28.166<br />
deny from 95.78.87.244<br />
deny from 184.154.55.239<br />
deny from 188.165.219.228<br />
deny from 128.68.112.71<br />
deny from 114.45.57.196<br />
deny from 46.183.162.249<br />
deny from 95.78.91.87<br />
deny from 46.183.162.113<br />
deny from 46.164.230.34<br />
deny from 220.157.99.78<br />
deny from 178.205.34.45<br />
deny from 46.159.62.89<br />
deny from 83.24.56.217<br />
deny from 178.217.228.93<br />
deny from 46.183.162.151<br />
deny from 188.92.75.244<br />
deny from 46.109.200.165<br />
deny from 114.33.112.160<br />
deny from 180.183.207.89<br />
deny from 209.45.87.186<br />
deny from 83.6.24.237<br />
deny from 46.183.162.215<br />
deny from 46.183.162.71<br />
deny from 178.204.0.58<br />
deny from 95.132.199.43<br />
deny from 46.183.162.146<br />
deny from 89.178.251.46<br />
deny from 46.183.162.23<br />
deny from 83.11.84.170<br />
deny from 46.251.237.91<br />
deny from 93.178.75.91<br />
deny from 89.28.48.189<br />
deny from 94.180.69.179<br />
deny from 93.127.127.16<br />
deny from 188.187.148.243<br />
deny from 178.42.169.183<br />
deny from 187.62.103.10<br />
deny from 93.184.13.76<br />
deny from 89.178.251.46<br />
deny from 176.214.153.128<br />
deny from 46.183.162.88<br />
deny from 46.183.162.137<br />
deny from 95.73.253.49<br />
deny from 195.211.63.151<br />
deny from 46.183.162.153<br />
deny from 188.138.113.94<br />
deny from 85.214.84.104<br />
deny from 91.124.244.224<br />
deny from 46.251.237.91<br />
deny from 46.251.237.94<br />
deny from 201.75.80.77<br />
deny from 178.204.120.236<br />
deny from 213.246.181.234<br />
deny from 188.187.148.243<br />
deny from 78.137.61.236<br />
deny from 91.76.29.143<br />
deny from 187.6.87.243<br />
deny from 31.128.80.43<br />
deny from 188.143.233.157<br />
deny from 188.186.35.190<br />
deny from 95.82.233.17<br />
deny from 193.33.171.254<br />
deny from 193.33.171.251<br />
deny from 31.128.80.36<br />
deny from 31.128.84.73<br />
deny from 31.128.83.225<br />
deny from 94.142.135.225<br />
deny from 95.143.22.53<br />
deny from 89.252.58.228<br />
deny from 178.211.98.250<br />
deny from 46.137.240.63<br />
deny from 91.226.165.164<br />
deny from 83.174.223.109<br />
deny from 188.163.104.122<br />
deny from 80.245.86.19<br />
deny from 194.187.151.11<br />
deny from 188.114.45.76<br />
deny from 46.17.97.248<br />
deny from 46.17.97.109<br />
deny from 41.158.128.180<br />
deny from 188.231.170.137<br />
deny from 93.79.224.201<br />
deny from 194.63.141.198<br />
deny from 95.143.20.213<br />
deny from 95.25.80.83<br />
deny from 188.114.55.66<br />
deny from 91.76.25.65<br />
deny from 31.23.140.5<br />
deny from 95.143.21.105<br />
deny from 210.212.55.194<br />
deny from 94.79.54.144<br />
deny from 91.76.17.17<br />
deny from 31.29.138.89<br />
deny from 193.33.171.252<br />
deny from 188.163.70.189<br />
deny from 194.146.197.3<br />
deny from 117.197.202.49<br />
deny from 31.184.236.66<br />
deny from 108.62.193.196<br />
deny from 46.17.97.83<br />
deny from 46.251.227.3<br />
deny from 31.178.7.2<br />
deny from 91.76.5.241<br />
deny from 95.110.124.205<br />
deny from 95.143.22.42<br />
deny from 200.251.58.190<br />
deny from 109.196.18.4<br />
deny from 189.110.223.182<br />
deny from 195.62.25.253<br />
deny from 188.163.105.125<br />
deny from 188.233.18.112<br />
deny from 195.62.25.247<br />
deny from 176.65.164.111<br />
deny from 1.161.140.56<br />
deny from 195.62.25.248<br />
deny from 93.178.95.86<br />
deny from 188.163.105.47<br />
deny from 178.137.160.135<br />
deny from 94.27.92.229<br />
deny from 91.207.6.174<br />
deny from 81.201.17.87<br />
deny from 178.16.146.2<br />
deny from 78.26.173.151<br />
deny from 109.165.36.149<br />
deny from 91.213.82.18<br />
deny from 46.17.98.0<br />
deny from 107.22.118.113<br />
deny from 46.251.237.191<br />
deny from 173.208.66.240<br />
deny from 31.128.85.166<br />
deny from 31.128.83.193<br />
deny from 31.128.82.215<br />
deny from 188.163.66.34<br />
deny from 31.128.81.72<br />
deny from 110.85.73.216<br />
deny from 120.43.21.228<br />
deny from 222.77.229.113<br />
deny from 46.109.194.46<br />
deny from 192.162.19.196<br />
deny from 91.231.40.27<br />
deny from 31.128.224.184[&#47;cce]<br />
<&#47;div><br />
Надеюсь, что вы внесете свою лепту в этот список. Есть, конечно, один минус, по идее, большой список должен затормаживать обработку запроса сервером, ведь он должен произвести сравнения по всему списку. Но на деле это не очень и заметно. Хотя, конечно, это зависит от вашего хостера, и везде результат будет разный. Так что советую произвести замеры загрузки страниц и если они после внесения кода сильно изменяться в худшую сторону, то либо использовать сокращенный список, либо вообще отказаться от этого.</p>
<h3>Заблокировать комментаторов без referer<&#47;h3><br />
Довольно неплохой метод, суть которого в том, чтобы отсекать комментаторов, которые напрямую посылают свой комментарий в скрипт обработки комментария без прогрузки страницы.</p>
<p>В заголовке запроса к серверу есть поле <strong>referer<&#47;strong>, которое содержит URL источника запроса. Тут все просто, eсли перейти с одной страницы на другую, то referer будет содержать адрес первой страницы. И в нашем случае, любой нормальный комментатор вначале прогружает страницу поста и только потом шлет свой комментарий и, соответственно, когда сервер обрабатывает этот комментарий, он видит, откуда он пришел. В то же время, большинство ботов шлют свои комментарии напрямую, минуя пост, что и подводит их.</p>
<p>Для того, чтобы отсечь этих нерадивых ботов необходимо в <em>.htaccess<&#47;em> внести следующий код:<br />
[cce lang="text"]RewriteEngine On<br />
RewriteCond %{REQUEST_METHOD} POST<br />
RewriteCond %{REQUEST_URI} .wp-comments-post\.php*<br />
RewriteCond %{HTTP_REFERER} !.*paperplane\.su.* [OR]<br />
RewriteCond %{HTTP_USER_AGENT} ^$<br />
RewriteRule (.*) ^http:&#47;&#47;%{REMOTE_ADDR}&#47;$ [R=301,L][&#47;cce]<br />
И соответственно вместо <em>paperplane\.su<&#47;em> вписать свой домен. И обратите внимание, что я экранировал точку с помощью обратного слеша. Без экранирования этот алгоритм будет действовать не совсем верно, хотя это не критично. Для тех, кто не знает, в данном выражении просто точка означает любой символ (например, подойдут paperplaneуsu, paperplane,su и др.), а чтобы она означала только точку, ее нужно экранировать.</p>
<h2 style="text-align: center;">Остальные меры<&#47;h2><br />
К остальным мерам можно отнести те, которые не препятствуют проникновению спамера на блог, но могут отсеять их комментарий при модерации, что позволит хотя бы не ставить их в очередь на одобрение и не задерживать настоящих комментаторов. Самые действенные методы - это манипуляция с формой комментирования, то бишь подмена полей. Я предложу вам два варианта: с плагином и без плагина.</p>
<h3>Без плагина<&#47;h3><br />
Данный метод реализовывается довольно просто. И велосипед я изобретать не буду, все давно придумано. Первый, или один из первых этот метод придумал&nbsp;<strong>Flector<&#47;strong>. Он его развивал достаточно долго и конечный вариант описал на своем&nbsp;<a title="Защита от спама в WordPress без плагинов" href="http:&#47;&#47;www.wordpressplugins.ru&#47;faq&#47;no-spam-2.html" target="_blank">блоге<&#47;a>. Тут я приведу сокращенную выдержку из его поста.</p>
<p>Идея <strong>Flector<&#47;strong>'а заключается в подмене поля комментирования. Стандартное поле <em>comment<&#47;em> скрывается, а вместо него подставляется новое поле <em>real-comment<&#47;em>. Для посетителей блога все останется, как прежде, но теперь они будут вводить комментарий в <em>real-comment<&#47;em>, а спам-скрипты будут заполнять стандартное поле <em>comment<&#47;em>, которое невидимо для реальных посетителей.</p>
<p>Для подмены поля комментирования возможны два варианта, использование которых зависит от версии, под которую был сверстан ваш шаблон:</p>
<p><strong>Вариант первый<&#47;strong>. Если у вас комментарии выводятся не через функцию <em>comment_form()<&#47;em> (она была введена в WordPress 3.0 и предназначена для полной замены формы комментария), то в этом случае откройте файл comments.php шаблона и найдите там код, выводящий поле для ввода комментария:<br />
[cce lang="xml"]<textarea id="comment" class="textarea" name="comment"><&#47;textarea>[&#47;cce]<br />
И замените его на следующий:<br />
[cce lang="xml"]
<div class="smo">
  <textarea id="comment" class="textarea" name="comment"><&#47;textarea><br />
<&#47;div></p>
<p><textarea id="real-comment" class="textarea" name="real-comment"><br />
<&#47;textarea>[&#47;cce]<br />
Теперь надо скрыть стандартное поле для ввода комментария с классом <em>smo<&#47;em>. Для этого в файл стилей вашего шаблона <em>style.css<&#47;em> и добавьте следующий код:<br />
[cce lang="css"].smo {position: absolute; left: -1000px;}[&#47;cce]<br />
<strong>Вариант два<&#47;strong>. Если ваш шаблон использует для вывода формы комментирования новую функцию <em>comment_form()<&#47;em>. То тут придется перехватывать создание формы комментирования через файл <em>functions.php<&#47;em>. В него добавьте следующий код:<br />
[cce lang="php"]add_filter('comment_form_defaults', 'change_comment_form_defaults');</p>
<p>function change_comment_form_defaults($default) {<br />
  $commenter = wp_get_current_commenter();<br />
  $default['comment_notes_after'] .=<br />
  '
<p class="comment-form-real-comment">
  <label for="real-comment">Комментарий<&#47;label><textarea id="real-comment"<br />
  aria-required="true" rows="8" cols="45" name="real-comment"><&#47;textarea><br />
  <&#47;p>';<br />
  return $default;<br />
}[&#47;cce]<br />
Скрыть стандартное поле надо путем вставки в <em>style.css<&#47;em> кода:<br />
[cce lang="css"].comment-form-comment {display: none;}[&#47;cce]<br />
После подмены поля для посетителей видно поле <em>real-comment<&#47;em> (используйте другое имя, чтобы боты не обучались), а стандартное поле скрыто и доступно только ботам. Теперь нам надо определить, какое из полей было заполнено комментатором - если видимое, то комментарий пропускаем, а если невидимое, то запрещаем его публикацию. В <em>functions.php<&#47;em> добавьте код:<br />
[cce lang="php"]add_filter('pre_comment_on_post', 'verify_spam');</p>
<p>function verify_spam($commentdata) {<br />
  $spam_test_field = trim($_POST['comment']);<br />
  if(!empty($spam_test_field)) wp_die('Спаму нет!');<br />
  $comment_content = trim($_POST['real-comment']);<br />
  $_POST['comment'] = $comment_content;<br />
  return $commentdata;<br />
}[&#47;cce]<br />
После этого спам-боты не пройдут, только особо умные и эрудированные, кои очень редко попадаются.</p>
<h3>Плагин Antispam Bee<&#47;h3><br />
Я не часто рекомендую использовать плагины, но этот того стоит. Этот плагин реализовывает примерно тоже самое, что было сделано <strong>Flector<&#47;strong>'ом (выше). Этот вариант для тех, кто совсем не разбирается в PHP и не сможет самостоятельно внести изменения в шаблон. Плагин крайне легкий и не требует много ресурсов, прост в использовании и эффективен. Его можно скачать с официальной <a href="http:&#47;&#47;playground.ebiene.de&#47;antispam-bee-wordpress-plugin&#47;" rel="nofollow" target="_blank">страницы<&#47;a>&nbsp;и установить как л юбой другой плагин. Он имеет перевод интерфейса на русский язык, так что с настройкой его работы так же не должно быть проблем. Также его плюс перед предыдущим методом без плагина в его большей гибкости. Например, можно банить или разрешать целые страны, разрешить комментарии только в одном языке,&nbsp;не прошедшие&nbsp;комментарии отмечать как спам или сразу удалять и другое.</p>
<p>На этом у меня все про борьбу со спамом в WordPress. Надеюсь, эта статья вам поможет оградить ваш блог от спама мешающего всем нам жить спокойно. Всем удачи!</p>

---
layout: post
status: publish
published: true
title: Быстрое создание сайта на Symfony 1.4 без использования базы данных
author:
  display_name: SlowProg
  login: seoadmin
  email: paperplanesu@rambler.ru
  url: http://paperplane.su
author_login: seoadmin
author_email: paperplanesu@rambler.ru
author_url: http://paperplane.su
wordpress_id: 859
wordpress_url: http://paperplane.su/?p=859
date: '2011-08-31 13:55:25 +0400'
date_gmt: '2011-08-31 13:55:25 +0400'
categories:
- Symfony 1.4
tags:
- Symfony
- создать сайт
comments:
- id: 166
  author: Антон
  author_email: awddwa2@yandex.ru
  author_url: http://seogang.ru/
  date: '2011-08-31 17:21:45 +0400'
  date_gmt: '2011-08-31 17:21:45 +0400'
  content: я микроблог веду на симфони
- id: 167
  author: SlowProg
  author_email: gilberthosting@gmail.com
  author_url: http://paperplane.su
  date: '2011-08-31 17:40:27 +0400'
  date_gmt: '2011-08-31 17:40:27 +0400'
  content: Да! это замечательная вещь. С помощью нее все можно сварганить! и микро
    блог это только капля в море =) но тоже весело!
- id: 241
  author: Александр
  author_email: mailbosa@mail.ru
  author_url: ''
  date: '2011-09-18 14:37:57 +0400'
  date_gmt: '2011-09-18 14:37:57 +0400'
  content: Хорошая статья, прикольный блог ! ))
---
<p><a href="http:&#47;&#47;image.paperplane.su&#47;2011&#47;08&#47;symfont-site.png"><img class="alignleft size-medium wp-image-897" title="Быстрое создание сайта на Symfony 1.4 без базы данных" src="http:&#47;&#47;image.paperplane.su&#47;2011&#47;08&#47;symfont-site-300x300.png" alt="Быстрое создание сайта на Symfony 1.4 без базы данных" width="300" height="300" &#47;><&#47;a>Добрый день, дорогой читатель. Все кто начинают изучать и пробовать Symfony вначале сталкиваются с тем, что не могут достигнуть значимого результата в короткие сроки. Я это постараюсь исправить. Сегодня я хочу рассказать про то, как можно быстро и не замарачиваясь создать маленький сайт на <strong>Symfony 1.4<&#47;strong>&nbsp;без использования базы данных. Это будет скорее маленький туториал для того, чтобы увидеть возможности Symfony, нежели прямой призыв к действию. Но это не значит, что сайт будет бесполезный, очень даже наоборот, у нас должен получится статический сайт-визитка. Просто я не хочу, чтобы вы этим способом делали даже сайты-визитки т.к. этот способ немного нарушает <a rel="nofollow" title="Описание паттерна MVC (Model-view-controller, Модель-представление-контроллер)" href="http:&#47;&#47;ru.wikipedia.org&#47;wiki&#47;Model-View-Controller" target="_blank">паттерн MVC<&#47;a>. Я&nbsp;просто хочу показать гибкость и возможности Symfony, и что даже играя не по правилам можно достигнуть результат. Так как это уникальная вещь и сделать сайт можно за считанные минуты.</p>
<p>Поскольку в этой статье я не собираюсь описывать полный путь изготовления сайта, а только его каркаса на Symfony, то сделаем небольшие допущения:</p>
<ul>
<li>У вас <a title="Ручная установка Symfony на Denwer" href="http:&#47;&#47;paperplane.su&#47;blog&#47;symfony&#47;ruchnaya-ustanovka-symfony-na-denwer" target="_blank">установлен Symfony 1.4<&#47;a>&nbsp;и создан фронтэнд.<&#47;li>
<li>У вас уже сделаны все стили или вы их сделаете позже для сайта.<&#47;li>
<li>Вы уже знаете какие страницы будите делать и какой контент на них заливать.<&#47;li><br />
<&#47;ul><br />
Вот, все допущения готовы. Давайте решим, что будем делать. Не знаю какие страницы решили делать вы, но я сделаю стандартные страницы сайта-визитки: о компании, услуги, контакты. При этом нам необходимо сделать страницу "<em>О компании<&#47;em>" корневой т.е. той которая будет показываться, когда введен просто адрес сайта. Для первого раза, я думаю, хватит. Для того, чтобы создать эти страницы необходимо проделать следующие действия:</p>
<ul>
<li><strong>Создать модуль.<&#47;strong>&nbsp;Этот модуль будет отвечать за обработку запросов и выдачу шаблонов.&nbsp;Соответственно в рамках этого пункта необходимо создать действия (<em>actions<&#47;em>) и шаблоны (<em>templates<&#47;em>).<&#47;li>
<li><strong>Создать маршрут<&#47;strong>. Маршрут определяет URL (например, <em>&#47;service<&#47;em>) к странице и контроллер, который Symfony должен запускать, когда URL входящего запроса соответствует определенному шаблону маршрута.<&#47;li><br />
<&#47;ul><br />
Может показаться, что делать придется много, но на самом деле это не так. Тем более все действия довольно простые. Давайте приступим.</p>
<h2>Создание модуля<&#47;h2><br />
Поскольку базы данных нам не нужно мы можем сразу быстро создать модуль, который будет формировать наши страницы. Но перед его созданием необходимо намекнуть Symfony, что мы не будем использовать базу данных, чтобы в дальнейшем не было непонятных ошибок. Для этого проходим до файла <em>settings.ym<&#47;em>l&nbsp;в директории фронтенда <em>\apps\frontend\config\<&#47;em>. В этом файле необходимо найти параметр <em>use_database<&#47;em> и поставить напротив него значение <em>false<&#47;em>. Все, теперь Symfony знает, что базу данных мы использовать не будем.</p>
<p>Приступим к делу. Создавать модуль будем вручную (минуя командную строку). Для создания необходимо сделать следующее:</p>
<ul>
<li>В директории фронтенда в модулях (<em>\apps\frontend\modules\<&#47;em>) создаем папку&nbsp;<em>simplePage<&#47;em> (это название нашего модуля).<&#47;li>
<li>В этой папке создаем еще две для действий и шаблонов:&nbsp;<em>actions<&#47;em> и&nbsp;<em>templates<&#47;em>.<&#47;li>
<li>В <em>action<&#47;em> создаем файл&nbsp;<em>actions.class.php<&#47;em>и вписываем в него класс с пока пустым методом:<br />
[cce lang="php"]<?php<br />
class simplePageActions extends sfActions<br />
{<br />
	public function executeIndex(sfWebRequest $request){}<br />
	public function executeService(sfWebRequest $request){}<br />
	public function executeContact(sfWebRequest $request){}<br />
}[&#47;cce]<br />
<&#47;li></p>
<li>В <em>templates&nbsp;<&#47;em>необходимо создать несколько шаблонов с названиями&nbsp;<em>indexSuccess.php<&#47;em>,&nbsp;<em>serviceSuccess.php&nbsp;<&#47;em>и&nbsp;<em>contactSuccess.php<&#47;em>. Помещаем в эти шаблоны свое содержимое, которое нужно расположить на страницах. Т.е. в&nbsp;&nbsp;<em>indexSuccess.php<&#47;em> поместить информацию о компании, в <em>serviceSuccess.php&nbsp;<&#47;em>- информацию об услугах и в <em>contactSuccess.php&nbsp;<&#47;em>- о контактах.<&#47;li><br />
<&#47;ul><br />
Как вы можете догадаться, методы (действия) класса <em>simplePageActions<&#47;em> вызывают соответствующие им шаблоны и отдают их как ответ. Symfony очень просто находит для каждого действия соответствующий шаблон по их названию, где присутствуют одинаковые части, которые и обозначают, кто кому принадлежит. Теперь почти все готово для того, чтобы заработал наш сайт. Осталось только одно: необходимо настроить маршрутизацию, для того, чтобы в зависимости от URL запускалось определенное действие, которое отдавало в ответ определенный шаблон.</p>
<h2>Настройка маршрутизации<&#47;h2><br />
Для того, чтобы настроить маршрутизацию необходимо пройти в папку настроек фронтенда (<em>\apps\frontend\config\<&#47;em>) и там найти файл&nbsp;<em>routing.yml<&#47;em>. В этот файл вписать следующие строки (и&nbsp;соответственно&nbsp;заменить главную страницу на нашу, которая там по умолчанию):<br />
[cce lang="bash"]homepage:<br />
  url:   &#47;<br />
  param: { module: simplepage, action: index }</p>
<p>service:<br />
  url:   &#47;service<br />
  param: { module: simplepage, action: service }</p>
<p>contact:<br />
  url:   &#47;contact<br />
  param: { module: simplepage, action: contact }[&#47;cce]<br />
Тут мы вписали шаблоны для каждого URL и&nbsp;соответствующие&nbsp;им действия в модуле. Другими словами, когда Symfony будет находить совпадения шаблона с запросом в URL, он обратится к модулю <em>simplepage <&#47;em>и запустит соответствующее запросу действие на исполнение. Надеюсь, понятно. Сохраняем файл и идем проверять работоспособность сайта. Пишем в браузере все возможные варианты: <em>site&#47;frontend_dev.php&#47;<&#47;em>, <em>site&#47;frontend_dev.php&#47;contact&#47;<&#47;em>, <em>site&#47;frontend_dev.php&#47;service&#47;<&#47;em>. Конечно же вместо <em>site<&#47;em> необходимо подставить ваше название сайта. Все нормально работает? Если "да", то отлично, если "нет", то пишите в комментарии будем разбираться. Но все, по идеи, должно отработать хорошо.</p>
<p>Теперь давайте добавим навигацию по этим страницам, чтобы было удобнее. Идем в главный шаблон фронтенда находящийся по адресу&nbsp;<em>\apps\frontend\templates\layout.php<&#47;em>. Если кому не понятно, то в этот шаблон встраиваются шаблоны действий. То есть это обертка, в которую&nbsp;заворачивают&nbsp;каждый ответ фреймворка. В этом шаблоне над строчкой<br />
[cce lang="php"]<?php echo $sf_content ?>[&#47;cce]<br />
добавляем код нашего навигационного меню:<br />
[cce lang="php"]
<ul>
<li><a href="<?php echo url_for('@homepage') ?>">О компании<&#47;a><&#47;li>
<li><a href="<?php echo url_for('@service') ?>">Услуги<&#47;a><&#47;li>
<li><a href="<?php echo url_for('@contact') ?>">Контакты<&#47;a><&#47;li><br />
<&#47;ul>[&#47;cce]<br />
Всё, теперь у вас есть даже навигационное меню для всех страниц. Можете протестить и попрыгать с одной странички на другу. На этом, в принципе, и конец. Дальнейшее улучшение сайта лежит на ваших плечах. Делайте стили, подключайте их к проекту, рисуйте дизайн и т.д.</p>
<p>Еще раз повторюсь, что данный способ построения сайта на Symfony 1.4 носит чисто обучающий характер, для того чтобы вы поняли, как взаимосвязаны основные части модуля. А главное получили скорейшую отдачу от работы с Symfony, что сподвигнет вас к дальнейшему изучению этого замечательного фреймворка! Надеюсь, я добился своей цели! Всем удачи в сайтостроении.</p>
